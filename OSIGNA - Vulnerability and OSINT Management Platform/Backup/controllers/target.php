<?php

class tar
{
	public $name = "BNP";
	public $nbsites = 4;
	public $nbcrit = 88;
	public $status = "SECURE";
	public $id = 1;
}

class site
{
	public $name = "bnp.com";
	public $status = "SECURE";
	public $lastscandate = "21-12-2012";
	public $lastscan = "INC-Full-OSINT";
	public $nbcrit = 17;
	public $nbvulns = 88;
	public $nbpages = 39;
	public $token = "f93u830dfj";
	public $id = 1;
}

class Target extends Auth_Controller {

	function index()
	{
		$data['main_content'] = 'target_index';
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/dashboardui.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/css3-buttons.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/jquery-ui-1.8.2.custom.css" />',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-1.6.4.min.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-ui-1.8.16.custom.min.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery.dashboard.min.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/themeroller.js"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/mytables.js" type="text/javascript"></script>',
			);
			
		$opt_head = array(
			"title" => "Targets",
			"opt_load" => $opt_load,
			);
			
		// temp objects to replace with real sql request
		$targets = array();
		for ($i=0;$i<5;$i++)
		{
			$t = new tar();
			$targets[] = $t;
		}
		
		$opt = array($targets);
		
		$data['opt'] = $opt;
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);		
	}
	
	function add()
	{
		// load view : formulaire new target
		$data['main_content'] = 'target_add';
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/dashboardui.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/css3-buttons.css" />',
			);
		$opt_head = array(
			"title" => "Targets",
			"opt_load" => $opt_load,
			);
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);	
	}
	
	function edit()
	{
		$data['main_content'] = 'target_edit';
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/dashboardui.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/css3-buttons.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/progress.css" />',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-1.6.4.min.js"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/jquery.easytabs.min.js" type="text/javascript"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/progress.js"></script>',
			);
		$opt_head = array(
			"title" => "Targets",
			"opt_load" => $opt_load,
			);
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);	
	}
	
	function osint()
	{
		$data['main_content'] = 'target_osint';
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/dashboardui.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/css3-buttons.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/progress.css" />',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-1.6.4.min.js"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/jquery.easytabs.min.js" type="text/javascript"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/progress.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/third-party/Three/ThreeWebGL.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/third-party/Three/ThreeExtras.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/third-party/Three/RequestAnimationFrame.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/third-party/Three/Detector.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/third-party/Tween.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/globe/globe.js"></script>',
			'<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.0.js"></script>',
			);
		$opt_head = array(
			"title" => "Targets",
			"opt_load" => $opt_load,
			);
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);
	}
	
	function add_validate()
	{
		// check post info and write target to DB
	}
	
	function detail($targetId)
	{ 
		// get reports/getTargetReport($targetID)
		// load view : target_detail
		//$this->load->library('api');
		//$report = $this->api->getTargetReport($targetId);
		$report = null;
		$data['main_content'] = 'target_detail';
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/dashboardui.css" />',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/css3-buttons.css" />',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-1.6.4.min.js"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/jquery.easytabs.min.js" type="text/javascript"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/mytables.js" type="text/javascript"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/test/d3.v2.js"></script>',
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/test/force/force.css" />',
			);
		//$subitems = array('Summary', 'Inventory', 'Maps', 'parent:Content', 'child:Documents', 'child:childlast:Identities');
		
		$subitems = array('Summary' => 'target/detail/1', 'Inventory' => 'target/inventory', 'Maps' => 'target/maps', 'Documents' => 'target/documents');
		
		
		$opt_head = array(
			"title" => "Targets",
			"opt_load" => $opt_load,
			"subitems" => $subitems,
			);
		
		// temp objects to replace with real sql request
		$sites = array();
		for ($i=0;$i<5;$i++)
		{
			$s = new site();
			$sites[] = $s;
		}
		
		$opt = array($sites);
		
		//$opt[] = $report;
		$data['opt'] = $opt;
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);	
	}
	
	function inventory()
	{
		$this->load_page('target_inventory', 1);
	}
	
	function maps()
	{
		$this->load_page('target_maps', 2);
	}
	
	function documents()
	{
		$this->load_page('target_documents', 3);
	}
	
	function load_page($f, $p, $s=NULL)
	{
		//$opt = array($this->fullsites, $s);
		$data['opt'] = null;
		$data['main_content'] = $f;
		$opt_load = array(
			'<link rel="stylesheet" type="text/css" href="http://www.datalabsecurity.com/webscan/resources/css/jquery-ui-1.8.2.custom.css" />',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-1.6.4.min.js"></script>',
			'<script type="text/javascript" src="http://www.datalabsecurity.com/webscan/resources/js/jquery-ui-1.8.16.custom.min.js"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/jquery.easytabs.min.js" type="text/javascript"></script>',
			'<script src="http://www.datalabsecurity.com/webscan/resources/js/mytables.js" type="text/javascript"></script>',
		);
		$subitems = array('Summary' => 'target/detail/1', 'Inventory' => 'target/inventory', 'Maps' => 'target/maps', 'Documents' => 'target/documents');
		$title = "Targets";
		$opt_head = array(
			"opt_load" => $opt_load,
			"title" => $title,
			"subitems" => $subitems,
			"defaultTab" => $p,
		);
		$data['opt_head'] = $opt_head;
		$this->load->view('includes/template-beta', $data);
	}
	
}

