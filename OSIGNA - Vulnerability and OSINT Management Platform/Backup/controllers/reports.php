<?php

class Reports extends Auth_Controller {

	function index()
	{
		// load view : liste des reports
	}
	
	function getSiteReport($siteID)
	{
		// returns $siteID Website report information
	}
	
	function getTargetReport($targetID)
	{
		// returns $siteID Website report information
	}
	
	function view_report($reportID)
	{
		// call $this->getSiteReport ou $this->getTargetReport
		// load view : report_detail avec en parametre ce que la fonction getSiteReport ou getTargetReport a retourne
		// la vue loadee est dupliquee par les controlleurs "website" et "target" (raison: loader la vue depuis le controlleur eponyme pour conserver une URL coherente pour le user)
	}

//limit v1
/*
	function index()
	{
		// Retrieve content
		//$rep = $this->parseReport("http://deadislandcraft.com/sample-report.xml");
	
		// Load View
		//$data['main_content'] = 'reports_form';
		$subitems = array('Summary', 'Server info', 'Maps', 'Vulnerabilities', 'SEO');
		$opt_head = array(
			"title" => "Reports",
			"opt_load" => $opt_load,
			"subitems" => $subitems,
			);
		$this->load->view('includes/template-beta', $data);
	}
	
	function parseReport ($xmlfile)
	{
/* 		$report = simplexml_load_file($xmlfile);
		
		foreach ($report->Scan as $scan)
		{
			if ($scan['method'] == "web")
			{
				echo "Target : " . $scan->Site['name'] . " (" . $scan->Site->SiteIp . ")" . " <br />";
				echo "Scan level : " . $scan['level'] . "<br />";
				echo "<br />";
				echo $scan->Site->Vulns->Crit->Vuln->count() . " Critical <br />";
				echo $scan->Site->Vulns->Medium->Vuln->count() . " Medium <br />";
				echo $scan->Site->Vulns->Low->Vuln->count() . " Low <br />";
				echo $scan->Site->Vulns->Info->Vuln->count() . " Infos <br />";
			}
		} */
		//$this->load->library('vuln');
		
		//$this->load->model('vuln_model');
		//$a = $this->vuln_model->getVulns(1);
		//print_r($a);

	}
*/
}