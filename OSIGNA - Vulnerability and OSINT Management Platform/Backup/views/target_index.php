<div id="main-content2" style="position:absolute;">
	
	<div id="opt-singledoc" class="opt" style="display:none;">
		<div class="opt-element">
			<div class="viewpane-toolbar-icon share-icon"></div>
		</div>
		<div id="opt1" class="opt-element" style="margin-left:70px;">
			<div class="viewpane-toolbar-icon trash-icon"></div>
		</div>
	</div>
	<div id="opt-multipledoc" class="opt" style="display:none;position:absolute;top:-40px;">
	Multiple docs
	</div>
	
	<div style="position:fixed;left:50px;">
	<a href="http://www.datalabsecurity.com/webscan/target/add">
		<button style='height:28px !important;' class='action red'><span style='padding:0 7px !important; margin-top:-2px;font-size:10pt;' class='label'>Create</span></button>
	</a>
	</div>
	
	<div id="summary-container" style="position:relative;width:100%;border-bottom:1px solid #eee;margin-bottom:10px;padding-top:10px;">
		<div style="font-weight:bold;color:#777;font-size:11px;line-height:15px;">Overview</div>
		
		<div style="position:relative;height:70px;width:80%;border-bottom:1px solid #eee;padding-bottom:15px;">
			<div style="width:100%;height:40px;padding-left:30px;position:relative;">
				<div style="width:75px;height:30px;margin-left:30px;position:absolute;border-bottom:1px solid #e62626;margin-top:15px;">
					<span style="color: #444;font-size: 15pt;vertical-align: top;">
					38 
					</span>
					<span style="color:#555;font-size:11pt;position:relative;top:5px;">
					critical
					</span>
				</div>
				<div style="width:110px;height:30px;margin-left:165px;position:absolute;border-bottom:1px solid #28A1DA;margin-top:15px;">
					<span style="color: #444;font-size: 15pt;vertical-align: top;">
					12 
					</span>
					<span style="color:#555;font-size:11pt;position:relative;top:5px;">
					webservers
					</span>
				</div>
				<div style="width:120px;height:30px;margin-left:335px;position:absolute;border-bottom:1px solid #B6B6B6;margin-top:15px;">
					<span style="color: #444;font-size: 15pt;vertical-align: top;">
					132
					</span>
					<span style="color:#555;font-size:11pt;position:relative;top:5px;">
					documents
					</span>
				</div>
				<div style="width:90px;height:30px;margin-left:515px;position:absolute;border-bottom:1px solid #A03AFF;margin-top:15px;">
					<span style="color: #444;font-size: 15pt;vertical-align: top;">
					29
					</span>
					<span style="color:#555;font-size:11pt;position:relative;top:5px;">
					identities
					</span>
				</div>
			</div>
		</div>
		
	</div>
	
	<div id="targets-container" style="position:relative;">
		<div id="mytable" style="position:absolute;width:600px;height:50px;">
		</div>	
		<div id="target-detail-container" style="position:absolute;width:400px;height:50px;left:800px;display:none;">
			<div id="target-detail-title" style="font-size:16px;margin-bottom:10px;">
				<span style="line-height:10px;">OLFEO</span>
				<span style="font-size:11px;color:#aaa;font-style:italic;margin-left:50px;">last updated: 12 juillet 2012</span>
			</div>
			<div id="target-detail-websites" style="border-top:1px solid #eee; font-size:12px;padding-top:5px;margin-bottom:10px;">
				<span style="color:black;">Websites</br></span>
				<span style="color:#777;font-size:11px;">
					www.olfeo.com</br>
					client.olfeo.com</br>
					demo.olfeo.com
				</span>
			</div>
			<div id="target-detail-vulns" style="border-top:1px solid #eee; font-size:12px;padding-top:5px;margin-bottom:60px;">
				<span style="color:black;">Vulnerabilities</br></span>
				<div style="margin-top:5px;">
					<div style="position:absolute;width:40px;height:20px;border-bottom:1px solid #e62626;">
						<span style="color:#444;font-size:16px;">18</span>
						<span style="color:#555;font-size:11px;">critical</span>
					</div>
					<div style="position:absolute;left:60px;width:45px;height:20px;border-bottom:1px solid orange;">
						<span style="color:#444;font-size:16px;">37</span>
						<span style="color:#555;font-size:11px;">medium</span>
					</div>
					<div style="position:absolute;left:125px;width:40px;height:20px;border-bottom:1px solid green;">
						<span style="color:#444;font-size:16px;">82&nbsp;&nbsp;</span>
						<span style="color:#555;font-size:11px;">low</span>
					</div>
				</div>
			</div>
			<div id="target-detail-intel" style="border-top:1px solid #eee; font-size:12px;padding-top:5px;margin-bottom:10px;">
				<span style="color:black;">Intelligence</br></span>
				<div style="margin-top:5px;">
					<div style="position:absolute;width:40px;height:20px;border-bottom:1px solid #28A1DA;">
						<span style="color:#444;font-size:16px;">3</span>
						<span style="color:#555;font-size:11px;">servers</span>
					</div>
					<div style="position:absolute;left:60px;width:45px;height:20px;border-bottom:1px solid #B6B6B6;">
						<span style="color:#444;font-size:16px;">103</span>
						<span style="color:#555;font-size:11px;">docs</span>
					</div>
					<div style="position:absolute;left:125px;width:40px;height:20px;border-bottom:1px solid #A03AFF;">
						<span style="color:#444;font-size:16px;">14</span>
						<span style="color:#555;font-size:11px;">identities</span>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type='text/javascript'>
function loadOptionPanel(optdivID)
{
	$('div.opt').css({'display':'none'});
	$("#"+optdivID).css({'display':'block'});
}

function loadDetailPanel(target)
{
	$("#target-detail-container").css({'display':'block'});
	//document.getElementById("target-detail-container").innerHTML = target;
}

function dismissDetailPanel()
{
	$("#target-detail-container").css({'display':'none'});
}

$(document).ready(function() {

var mytableformat = ["5px","5px", "20px", "10px", "10px", "10px", "20px"];
var mytableheader = ["<input type='checkbox' value='yes'>","<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#DD4B39;'></span>","<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#222;'>name</span>","<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#222;'>status</span>","<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#222;'># sites</span>", "<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#222;'>critical</span>","<span style='font-size:11px;font-weight:bold;text-transform:uppercase;color:#222;'>Quick actions</span>"];
var mytabledata1 = ["<input type='checkbox' value='yes'>","<img src='http://www.datalabsecurity.com/webscan/resources/img/olfeo-favicon.gif' width='20px' height='20px' />","<a href='target/detail/1'><span style='font-color:black;'>OLFEO</span></a>", "<span style='font-weigt:bold;color:red;'>critical</span>", "3", "18", ""];
var mytabledata2 = ["<input type='checkbox' value='yes'>","<img src='http://www.datalabsecurity.com/webscan/resources/img/64-bnp-paribas.jpg' width='20px' height='20px' />","<span style='font-color:black;'>BNP-Paribas</span>", "<span style='font-weigt:bold;color:green;'>secured</span>", "87", "13", ""];
var mytabledata3 = ["<input type='checkbox' value='yes'>","<img src='http://www.datalabsecurity.com/webscan/resources/img/64-bnp-paribas.jpg' width='20px' height='20px' />","<span style='font-color:black;'>BNP-Paribas</span>", "<span style='font-weigt:bold;color:green;'>secured</span>", "87", "13", ""];
var mytabledata4 = ["<input type='checkbox' value='yes'>","<img src='http://www.datalabsecurity.com/webscan/resources/img/64-bnp-paribas.jpg' width='20px' height='20px' />","<span style='font-color:black;'>BNP-Paribas</span>", "<span style='font-weigt:bold;color:green;'>secured</span>", "87", "13", ""];
var mytabledata = [mytabledata1, mytabledata2, mytabledata3, mytabledata4];
printtable("mytable", mytableformat, mytableheader, mytabledata, "Targets");

$('#mytable tr')
	.filter(':has(:checkbox:checked)')
	.addClass('tr-selected')
	.end()
	.click(function(event) {
	var tid = this.id;
	$(this).toggleClass('tr-selected');
	if (event.target.type !== 'checkbox') {
	$(':checkbox', this).attr('checked', function() {
		if($(this).is(":checked")) {
			// uncheck
			var ttt = $("input[type='checkbox']:checked"); // retrieve all checkboxes checked
			for(t=0;t<ttt.length;t++)
			{
				var p = ttt[t].parentNode.parentNode.id;	// get the TR of the checkbox
				if(p!=tid)	// if this TR is not the one currently unchecking
				{
					loadDetailPanel(p);	// load the last target details
				}
			}
			var fooo = $("input[type='checkbox']:checked").length - 1;
			if (fooo > 0) {
				if (fooo > 1) {
					loadOptionPanel("opt-multipledoc");
				}
				else {
					loadOptionPanel("opt-singledoc");
				}
			}
			else {
				dismissDetailPanel();
				$('div.opt').css({'display':'none'});
			}
		} else {
			// check
			if(tid!="tabletitle") { loadDetailPanel(tid); }
			var fooo = $("input[type='checkbox']:checked").length + 1;
			if (fooo > 1) {
				loadOptionPanel("opt-multipledoc");
			}
			else {
				loadOptionPanel("opt-singledoc");
			}
		}
	return !this.checked;
	});
	}
});
});
</script>
<!--
<div id="main-content" style="padding:0; padding-top:0px; padding-left:0px;">

<a href="target/add"><button class="action blue"><span class='label'>New target</span></button></a>
</br></br></br></br></br>


<div id="targets-bar" style="position:absolute; width:50%;border:1px solid #aaa;">
	<table>
		<thead>
			<tr>
			   <th><input class="check-all" type="checkbox"></th>
			   <th>Name</th>
			   <th>Status</th>
			   <th># Sites</th>
			   <th>Critical</th>
			   <th>Quick actions</th>
			</tr>
		</thead>
	 
		<tfoot>
			<tr>
				<td colspan="6">
					<div class="bulk-actions align-left">
						<select name="dropdown">
							<option value="option1">Choose an action...</option>
							<option value="option2">Delete</option>
						</select>
						<a class="button" href="#">Apply to selected</a>
					</div>
					<div class="clear"></div>
				</td>
			</tr>
		</tfoot>
	 
		<tbody>
			<?php
			$targets = $opt[0];
			$i=0;
			//foreach($targets->result() as $target)
			foreach ($targets as $target)
			{
				if($i&1) { echo '<tr style="background:#ffffff;">'; } else { echo '<tr>'; }
				echo "<td><input type='checkbox'></td>";
				echo "<td><a href='target/detail/".$target->id."'>".$target->name."</a></td>";
				echo "<td><span style='color:green'>".$target->status."</span></td>";
				echo "<td>".$target->nbsites."</td>";
				echo "<td style='margin-left:auto;margin-right:auto;width:5%;'><button style='height:23px !important;' class='action red'><span style='padding:0 7px !important; margin-top:-2px;font-size:10pt;' class='label'>".$target->nbcrit."</span></button></td>";
				echo "<td>";
				echo "<div>";
				echo "<a href='http://www.datalabsecurity.com/webscan/policies/edit/1'><span style='width:25px; margin-right:8px;'><img height='20' width='20' src='http://www.datalabsecurity.com/webscan/resources/img/Pencil.png' alt='Edit'></span></a>";
				echo '<span style="width:25px; margin-right:8px;margin-top:5px;"><img height="20" width="20" src="http://www.datalabsecurity.com/webscan/resources/img/Gear.png" alt="Edit"></span>';
				echo '</div>';
				echo '</td>';
				echo '</tr>';
				$i++;
			}
			?>
		</tbody>
	</table>
</div>
</div>
-->