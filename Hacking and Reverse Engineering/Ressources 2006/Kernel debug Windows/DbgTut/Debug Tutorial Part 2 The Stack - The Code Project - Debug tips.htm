<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0045)http://www.codeproject.com/debug/cdbntsd2.asp -->
<HTML><HEAD><TITLE>Debug Tutorial Part 2: The Stack - The Code Project - Debug tips</TITLE>
<META http-equiv=Reply-to content=mailto:webmaster@codeproject.com>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<META content=en-US name=MS.LOCALE>
<META 
content="Introduction to the most important ally in the fight against bugs, the stack." 
name=Description>
<META content=kbArticle name=Search.TopicType>
<META content="Toby Opferman" name=Author>
<META content="19 Mar 2004 14:00:00 GMT" name=Search.PublishDate>
<META content="28 Mar 2004 14:00:00 GMT" name=Search.RevisedDate>
<META 
content="Free source code, , Visual C++, MFC, Windows, dmp dumpfile debugging cdb ntsd" 
name=keywords>
<META 
content="Article content copyright Toby Opferman, 2004, everthing else Copyright © CodeProject, 1999-2006, All Rights Reserved." 
name=Copyright><LINK title="CodeProject Lounge Postings" 
href="http://www.codeproject.com/webservices/LoungeRSS.aspx" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - All topics" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=1" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - MFC / C++" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=2" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - C#" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=3" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - ASP.NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=4" 
type=application/rss+xml rel=alternate><LINK 
title="CodeProject Latest articles - .NET" 
href="http://www.codeproject.com/webservices/articlerss.aspx?cat=5" 
type=application/rss+xml rel=alternate><LINK href="/favicon.ico" type=image/ico 
rel=icon><LINK href="/favicon.ico" rel="SHORTCUT ICON"><LINK 
href="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/global.css" 
type=text/css rel=stylesheet>
<SCRIPT language=javascript 
src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/oncopy.js"></SCRIPT>

<SCRIPT language=javascript>
if (top != self) top.location.href = location.href;
if (typeof(DemoUrl) != "undefined")
	document.write('<me' + 'ta http' + '-equiv="re' + 'fresh" con' + 'tent="1;url=' + DemoUrl + '">');
</SCRIPT>

<META content="MSHTML 6.00.2900.2995" name=GENERATOR></HEAD>
<BODY style="MARGIN: 0px" oncopy="return copyCode();" text=black vLink=navy 
aLink=red link=blue bgColor=white><!-- COPYRIGHT 2006 I/PRO Corporation ALL RIGHTS RESERVED. - Page view auditing -->
<SCRIPT language=JavaScript type=text/javascript>
var LSPT="";
LSPT += "?durl=" + escape(document.URL);
LSPT += "&hostname=" + location.hostname;
LSPT += "&url=" + location.pathname;
LSPT += "&query=" + escape(location.search) + escape(location.hash);
LSPT += "&referrer=" + escape(document.referrer);
LSPT += "&browser=" + escape(navigator.appName);
LSPT += "&version=" + escape(navigator.appVersion);
LSPT += "&os=" + escape(navigator.platform);
LSPT += "&xdomain=codeproject.com";
LSPT += "&custid=codeproject";
</SCRIPT>

<SCRIPT type=text/javascript>
document.write('<img src=http://'+'content.ipro.com/images/pixel.gif'+LSPT+' height="1" width="1" style="position:absolute; top:0px; left:0px">');
</SCRIPT>
<NOSCRIPT><IMG style="LEFT: 0px; POSITION: absolute; TOP: 0px" height=1 src="" 
width=1> </NOSCRIPT><!-- END I/PRO PAGE TAG -->
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD class=HeaderLogo><A href="http://www.codeproject.com/"><IMG height=90 
      alt=Home 
      src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/codeproject225x90.gif" 
      border=0></A></TD>
    <TD class=HeaderBanner><SPAN id=AdBanner4>
      <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=2246&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FToolbox%5F728x90%2Egif&C=False&id=2246&cb=4787723\" alt=\"\" border=0 width=728 height=90></a>");</SCRIPT>
      </SPAN></TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=MemberNavBar cellSpacing=0 cellPadding=5 width="100%" 
      border=0>
        <TBODY>
        <TR vAlign=center>
          <TD class=smallText style="FONT-WEIGHT: bold">3,566,327 members and 
            growing! &nbsp; 7,650 now online. </TD>
          <TD class=userNavText align=right>
            <SCRIPT type=text/javascript>
function signup(){document.location.href="/script/profile/modify.asp";}
function ShowJoin()
{
document.write("<input type=\"button\" class=FormButton onclick=\"return signup();\" value='Join!'>");
document.write("<input type=\"hidden\" name=\"fld_quicksign\" value=\"true\" />");
}
</SCRIPT>

            <FORM id=subForm 
            style="PADDING-RIGHT: 0px; PADDING-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-TOP: 0px" 
            name=subForm action=/script/profile/process_logon.asp 
            method=post>Email <INPUT class=tinyText id=Email 
            style="WIDTH: 100px" name=Email> Password <INPUT class=tinyText 
            id=Password style="WIDTH: 60px" type=password name=Password> <INPUT class=FormButton type=submit value="Sign in">
            <SCRIPT type=text/javascript>ShowJoin();</SCRIPT>
             <INPUT id=RememberMeCheck type=checkbox CHECKED name=cookie><LABEL 
            for=RememberMeCheck>Remember me?</LABEL> <A 
            href="http://www.codeproject.com/script/profile/forgot.asp"><IMG 
            height=16 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/HLP.gif" 
            width=16 align=absMiddle border=0> Password problem?</A> 
        </FORM></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=SiteNavBar id=tblSiteToolbar cellSpacing=0 cellPadding=0>
        <TBODY>
        <TR>
          <TD><A href="http://www.codeproject.com/">Home</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=2">MFC/C++</A></TD>
          <TD><A href="http://www.codeproject.com/index.asp?cat=3">C#</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=4">ASP.NET</A></TD>
          <TD><A href="http://www.codeproject.com/index.asp?cat=5">.NET</A></TD>
          <TD noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=6">VB.NET</A></TD>
          <TD class=SelCat noWrap><A 
            href="http://www.codeproject.com/index.asp?cat=1">All Topics</A></TD>
          <TD width="100%">&nbsp;</TD>
          <TD>
            <DIV id=MenuPos 
            style="WIDTH: 380px; POSITION: relative; TOP: 1px; HEIGHT: 22px">
            <TABLE id=MPH 
            style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; HEIGHT: 20px; BORDER-RIGHT-WIDTH: 0px" 
            cellSpacing=0 cellPadding=0 width=380>
              <TBODY>
              <TR vAlign=center>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/info/faq.asp">Help!</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/info/latest.asp">Articles</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/script/comments/forums.asp">Message 
                  Boards</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/store/">StoreFront</A></TD>
                <TD 
                style="BORDER-TOP-WIDTH: 0px; BORDER-LEFT-WIDTH: 0px; BORDER-BOTTOM-WIDTH: 0px; BORDER-RIGHT-WIDTH: 0px" 
                noWrap><A 
                  href="http://www.codeproject.com/lounge.asp">Lounge</A></TD></TR></TBODY></TABLE></DIV></TD></TR></TBODY></TABLE>
      <SCRIPT type=text/javascript>function Go(){return}</SCRIPT>

      <SCRIPT 
      src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/cpmenu_var.js" 
      type=text/javascript></SCRIPT>

      <SCRIPT 
      src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/menu10_com.js" 
      type=text/javascript></SCRIPT>

      <SCRIPT type=text/javascript>
var MPH = document.getElementById("MPH");
if (MPH) MPH.style.display='none';
</SCRIPT>
    </TD></TR>
  <TR>
    <TD colSpan=2>
      <TABLE class=ArticleHeader cellSpacing=0 cellPadding=3 width="100%">
        <TBODY>
        <TR vAlign=top>
          <TD class=smallText style="PADDING-RIGHT: 10px"><A 
            href="http://www.codeproject.com/?cat=1">All Topics</A>, <A 
            href="http://www.codeproject.com/?cat=2">MFC / C++</A> &gt;&gt; <A 
            href="http://www.codeproject.com/debug/">Debug tips</A> &gt;&gt; <A 
            href="http://www.codeproject.com/debug/#General">General</A><BR><BR>
            <DIV style="FONT-WEIGHT: bold; FONT-SIZE: 16pt">Debug Tutorial Part 
            2: The Stack</DIV><B>By <A 
            href="http://www.codeproject.com/script/Articles/list_articles.asp?userid=961412">Toby 
            Opferman</A></B>. <BR><BR>
            <DIV style="FONT-SIZE: 12px">Introduction to the most important ally 
            in the fight against bugs, the stack.</DIV></TD>
          <TD class=smallText style="WIDTH: 200px">C++ (VC7.1, VC7, VC6), 
            ASM<BR>Windows (WinXP, Win2K, Win2003)<BR>MFC, Win32, VS<BR>QA, 
            Dev<BR><SPAN style="PADDING-RIGHT: 2ex">Posted</SPAN>: <B>20 Mar 
            2004</B><BR><SPAN style="PADDING-RIGHT: 0.3ex">Updated</SPAN>: <B>29 
            Mar 2004</B><BR><SPAN style="PADDING-RIGHT: 3ex">Views</SPAN>: 
            <B>55,039</B> </TD></TR></TD></TR></TD></TR></TBODY></TABLE>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <TBODY>
        <TR vAlign=top>
          <TD class=LHNavBar rowSpan=2><!-- Yes, there are IE hacks that will allow us to create a min-width DIV 
	     (eg http://www.webreference.com/programming/min-width/) but I couldn't
	     be arsed. Wait for it in v2.0 -->
            <TABLE class=MemberNavBar 
            style="BORDER-RIGHT: 0px; BORDER-TOP: 0px; MARGIN-BOTTOM: 10px; BORDER-LEFT: 0px; BORDER-BOTTOM: 0px" 
            cellSpacing=0>
              <TBODY>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/books2_sml.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.amazon.com/gp/redirect.html?link_code=ur2&amp;tag=thecodeprojec-20&amp;camp=1789&amp;creative=9325&amp;location=/gp/browse%3Fnode=5">Programming 
                  books</A></TD></TR>
              <TR vAlign=top>
                <TD></TD>
                <TD></TD></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/support_icon.gif" 
                  width=16></TD>
                <TD class=smallText><A 
                  href="http://www.codeproject.com/store/"><B>Ultimate 
                  Combo<BR>MFC tools $449</B></A></TD></TR>
              <TR vAlign=top>
                <TD></TD>
                <TD></TD></TR></TR>
              <TR vAlign=top>
                <TD><IMG height=16 
                  src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/mail.gif" 
                  width=16></TD>
                <TD class=SmallText><A 
                  href="http://www.codeproject.com/script/recommend/form.asp?guid=cdbntsd2%2Fdebug3%2F20%2F2004">Send 
                  to a friend</A></TD></TR></TBODY></TABLE>
            <CENTER>
            <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=2255&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FTCPIP%5F160x600%2Egif&C=False&id=2255&cb=4787727\" alt=\"\" border=0 width=160 height=600></a>");</SCRIPT>
            </CENTER><BR><BR><IMG height=1 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
            width=160> </TD>
          <TD width="100%">
            <TABLE class=SearchHeaderBar cellSpacing=0 width="100%">
              <TBODY>
              <TR>
                <TD vAlign=center noWrap align=right width="60%">
                  <FORM style="MARGIN: 0px" name=Search action=/info/search.asp 
                  method=post><B>Search &nbsp;</B><INPUT class=smallText 
                  style="WIDTH: 200px" name=target> <SELECT 
                  style="FONT-WEIGHT: bold; FONT-SIZE: 8pt" name=st> <OPTION 
                    value=kw selected>Articles</OPTION> <OPTION 
                    value=au>Authors</OPTION></SELECT> <INPUT style="FONT-WEIGHT: bold; FONT-SIZE: 8pt" type=submit value=" Go! "> 
                  &nbsp; </FORM></TD>
                <TD class=tinyText noWrap><A 
                  href="http://www.codeproject.com/info/search.asp">Advanced 
                  Search</A><BR><A 
                  href="http://www.codeproject.com/script/articles/sections.asp">Sitemap</A> 
                </TD></TR></TBODY></TABLE>
            <TABLE width="100%">
              <TBODY>
              <TR vAlign=top>
                <TD class=SmallText noWrap>
                  <TABLE>
                    <TBODY>
                    <TR>
                      <TD class=smallText noWrap><IMG 
                        src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/print.gif" 
                        align=absMiddle> <A 
                        href="http://www.codeproject.com/debug/cdbntsd2.asp?print=true" 
                        target=_print>Print</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/sitebuild_icon.gif" 
                        align=absMiddle><A 
                        href="http://www.codeproject.com/script/submit/ReportProblem.asp?GUID=cdbntsd2%2Fdebug3%2F20%2F2004">Broken 
                        Article?</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/link.gif" 
                        align=absMiddle><A 
                        href="http://www.codeproject.com/script/profile/add_bookmark.asp?t=0&amp;ct=%2Fdebug%2Fcdbntsd2%2Easp&amp;guid=cdbntsd2%2Fdebug3%2F20%2F2004">Bookmark</A></TD>
                      <TD class=smallText noWrap><IMG 
                        src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/mail_small.gif" 
                        align=absMiddle> <A 
                        href="http://www.codeproject.com/debug/cdbntsd2.asp#__comments">Discuss</A></TD></TR></TBODY></TABLE></TD>
                <TD noWrap align=right><A name=__top></A>
                  <TABLE>
                    <TBODY>
                    <TR>
                      <TD class=smallText align=right>65 votes for this 
                        article.</TD>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=0 border=2>
                          <TBODY>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/red.gif" 
                              width=20 border=0></TD>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/red.gif" 
                              width=15 border=0><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/white.gif" 
                              width=5 border=0></TD></TR></TBODY></TABLE></TD></TR>
                    <TR>
                      <TD class=smallText align=right colSpan=2><A 
                        title="Calculated as rating x Log10(# votes)" 
                        href="http://www.codeproject.com/script/articles/top_articles.asp?st=2">Popularity: 
                        8.65</A>. Rating: <B>4.77</B> out of 
                  5.</TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD class=ArticlePane><SPAN id=intelliTXT>
            <DIV id=contentdiv><!-- Article Starts -->
            <H2>Introduction</H2>
            <P>Welcome to the second installment of these debugging tutorials. 
            In this article, I will investigate the stack and how it plays an 
            integral part in debugging. Anytime you ask the question "What do 
            you do when your program traps?", the most common answer is "Get a 
            stack trace". This is definitely true, it's probably the very first 
            thing you should do anytime you investigate a crash dump.</P>
            <P>Sorry if this tutorial is too general and beginner-ish! I should 
            probably set the level as beginner instead of intermediate. I only 
            set it as intermediate since the article is requiring assembly 
            knowledge.</P>
            <H2>What is the Stack?</H2>
            <P>This is the first and most obvious question. Unfortunately, I did 
            not cover or really answer this in the first tutorial as I was 
            taking for granted that everyone was familiar with it. In order to 
            explain what the stack is, let me start from where we begin, what a 
            process is.</P>
            <H3>What is a Process?</H3>
            <P>A process is basically an instance of an application in memory. 
            The executable and supported libraries are mapped into this address 
            space. A process does not execute, but just rather defines the 
            memory boundaries, resources, and the like which are accessible from 
            anyone operating within that process.</P>
            <H3>What is a Thread?</H3>
            <P>A thread is an instance of execution that operates within the 
            boundaries of a process. A process is not scheduled to execute, the 
            threads within a process are. There may be many threads executing in 
            the context of one process. Although a thread may have "thread 
            specific storage", generally all memory and resources created in the 
            context of the process can be used by any executing thread.</P>
            <H3>Global and Local Resources</H3>
            <P>Not to be confusing here, but there are exceptions. There are 
            resources that are created globally rather than locally. That means 
            these resources may be used outside the context of the process in 
            which they were created. One such example is a window handle. These 
            resources have their own boundaries outside of a process. Some 
            resources may be system wide, others desktop or session wide. There 
            are also "shared" resources where processes can negotiate sharing of 
            a resource through other means and mechanisms.</P>
            <H3>What is Virtual Memory?</H3>
            <P>In general, "Virtual Memory" is generally thought of as fooling 
            the system into thinking there's more physical memory than there 
            really is. This is true and false at the same time. It depends on 
            who "the system" is and there's really more to it than that.</P>
            <P>The system is not being fooled into thinking there's more memory 
            than there really is. The hardware already knows there's less memory 
            and is actually the one who implements the necessary mechanisms to 
            support "Virtual Memory". The Operating System is the one which 
            utilizes these capabilities to perform "Virtual Memory", so it is 
            also not being fooled. So, who is being fooled? If anyone is being 
            fooled, it's the processes running on the system.</P>
            <P>I don't believe that to be the case either. The application 
            programmer generally knows the system he is programming for already. 
            That means, he knows the Operating System uses "Virtual Memory" or 
            not such as DOS and he programs for that platform. In general, it 
            doesn't mean anything. A simple application really doesn't care as 
            long as it gets to execute. The only time you really run into 
            trouble would be a "cooperative multitasking" system verses a 
            "preemptive multitasking" system. But, then again, the programmer 
            knows his target platform and programs appropriately. The 
            differences with those two types of Operating Systems is beyond the 
            scope of this article and does not apply.</P>
            <P>So, back to answering this question. The first thing that 
            "Virtual Memory" does is that it abstracts the physical address 
            space of the machine. This means the application programs do not see 
            or know about the physical address. They know a "Virtual" address. 
            The CPU is then capable of converting a "Virtual" address to a 
            "Physical" address based on certain characteristics setup by the 
            Operating System. The details of that mechanism is beyond the scope 
            of this document. Just understand that the application receives a 
            "Virtual" address and the processor maps it to a physical 
            address.</P>
            <P>The next part of the equation is that the "Virtual" address does 
            not need to point to a "Physical" address. The Operating System can 
            use a swap file to keep memory on disk, that way, the entire program 
            does not have to be in physical memory at the same time. This allows 
            many programs to be in memory and execute. If a program attempts to 
            access a memory location that is not in physical memory, the CPU 
            knows this. The CPU will page fault and know that the memory that is 
            being accessed is out on disk. The Operating System will then get 
            told and will pull that memory from disk to Physical memory. Once 
            this is complete, the program is given back execution and will 
            continue where it left off.</P>
            <P>There are many algorithms to decide how to pull memory in from 
            disk. Unless you plan to grow the footprint of a process in Physical 
            memory, you usually swap a page out to swap one in. There are many 
            algorithms that the OS can use to grow the process physical foot 
            print and swap pages in and out. A simple one is basically, the 
            least frequently used page in memory. You generally want to avoid 
            writing programs that keep crossing page boundaries frequently, this 
            will eliminate "thrashing" which is swapping in and out pages from 
            memory to disk often. These topics are outside the scope of this 
            tutorial.</P>
            <P>The next advantage of "Virtual Memory" is protection. A process 
            cannot directly access another process's memory. That means that at 
            anyone time, the CPU has only the Virtual address mappings for that 
            process. That means, it can't resolve a virtual address in another 
            process. This makes sense because since they are separate mappings, 
            the processes could and will have the same memory address pointed to 
            different locations!</P>
            <P>That doesn't mean it's impossible to read another process' 
            memory. If the Operating System has built-in support, such as 
            Windows does, you can access another process' memory. You could also 
            do this if you could gain access to memory locations, and manipulate 
            the CPU registers as they relate to Virtual Memory mapping. Luckily, 
            you can't, as the CPU can check your privilege level before you 
            attempt to execute sensitive assembly instructions, and "Virtual 
            Memory" will keep you away from being a usermode process and 
            manipulating page or descriptor tables (Although, there is a method 
            in Windows 9x to get the LDT in usermode).</P>
            <H3>What is the stack?</H3>
            <P>Now that I've described the basics of the system, I can get back 
            to "What is a stack?". In general, a stack is a general-purpose data 
            structure that allows items to be pushed onto it and popped off. 
            Think of it as a stack of plates. You can put items on the top and 
            you can only take items off the top (without cheating). If you 
            followed that strict rule, you have a stack. A stack is generally 
            referred to as "LIFO" or "Last In First Off".</P>
            <P>Programs generally use the stack as a means of temporary storage. 
            This is generally unknown to the non-assembly programmer as the 
            language hides these details. However, the generated code produced 
            by your program will use a stack and the CPU has built-in stack 
            support!</P>
            <P>On Intel, the assembly instructions to put something on the stack 
            and take something off are <CODE lang=asm><SPAN 
            class=cpp-keyword>PUSH</SPAN></CODE> and <CODE lang=asm><SPAN 
            class=cpp-keyword>POP</SPAN></CODE>. Note that some processors use 
            <CODE lang=asm><SPAN class=cpp-keyword>PUSH</SPAN></CODE>/<CODE 
            lang=asm>PULL</CODE>, but in the Intel world, we use <CODE 
            lang=asm><SPAN class=cpp-keyword>PUSH</SPAN></CODE>/<CODE 
            lang=asm><SPAN class=cpp-keyword>POP</SPAN></CODE>. This is just a 
            "mnemonic" anyway, which basically means an English word for a 
            machine operation. All assembly boils down to an opcode or number 
            which is processed by the CPU. That means, you can call the 
            instruction anything you want in English as long as you use it 
            correctly and generate the correct "opcode".</P>
            <P>Getting back on track, every "thread" executing in a process has 
            its <B>own</B> stack. This is because we can't have multiple threads 
            attempting to use the same temporary storage location as we will see 
            in a moment.</P>
            <H4>How is a function call made?</H4>
            <P>The function call depends on the "calling convention". The 
            "calling convention" is a basic method that the caller (the function 
            making the call) and callee (the function being called) have agreed 
            on in order to pass parameters to the function and clean up the 
            parameters afterwards. In Windows, we generally support three 
            different calling conventions. These are "this call", "standard 
            call" and "CDECL or C Calling convention".</P>
            <H4>This Call</H4>
            <P>This is a C++ calling convention. If you're familiar with C++ 
            internals, member functions of an object require the <CODE><SPAN 
            class=cpp-keyword>this</SPAN></CODE> pointer to be passed into the 
            function. In general, the <CODE><SPAN 
            class=cpp-keyword>this</SPAN></CODE> pointer is the first parameter 
            on the stack. This is not the case with "this call". In "this call", 
            the <CODE><SPAN class=cpp-keyword>this</SPAN></CODE> pointer is in a 
            register, <CODE lang=asm><SPAN class=cpp-keyword>ECX</SPAN></CODE> 
            to be exact. The parameters are pushed on the stack in reverse order 
            and the callee cleans up the stack.</P>
            <H4>Standard Call</H4>
            <P>"Standard Call" is when the parameters are pushed backwards on to 
            the stack and the callee cleans up the stack.</P>
            <H4>CDECL or C Calling Convention</H4>
            <P>"C Calling" convention basically means that the parameters are 
            pushed backwards onto the stack and the caller cleans up the 
            stack.</P>
            <H4>Pascal Calling Convention</H4>
            <P>If you've seen old programs, you will see "PASCAL" as their 
            calling convention. In WIN32, you actually are not allowed to use 
            <CODE>__pascal</CODE> anymore. The <CODE>PASCAL</CODE> macro has 
            actually been redefined as "Standard Call". However, Pascal calling 
            convention parameters are pushed <B>forward</B> onto the stack. The 
            callee cleans up the stack.</P>
            <H4>Cleans up the stack?</H4>
            <P>The difference in who cleans up the stack is a big deal. The 
            first is saving bytes. If the callee cleans up the stack, that means 
            there doesn't have to be extra instructions generated at every 
            function call to clean up the stack. The disadvantage to this is 
            that you cannot use variable arguments. Variable arguments are used 
            by functions like <CODE>printf</CODE>. The actual callee does not 
            <I>REALLY</I> know how many arguments are pushed onto the stack. It 
            can only <I>GUESS</I> by the information provided to it, in say, its 
            format string. If you tell <CODE>printf <SPAN class=cpp-string>"%i 
            %i %i"</SPAN></CODE>, it will attempt to use 3 more values on the 
            stack to fill those, whether or not you pushed them or not! This may 
            or may not trap. If you push more parameters than you tell 
            <CODE>printf</CODE>, there's no problem since the caller is cleaning 
            up the stack anyway. They're just there for no reason, but 
            <CODE>printf</CODE> does not know they're there. Remember that, 
            variable argument functions do not magically know how many 
            parameters are there, they must implement some method for the caller 
            to tell them through their parameter list. <CODE>Printf</CODE>'s 
            just happen to be the format string, you could even pass a number 
            down if you want, but the compiler isn't going to do it for you.</P>
            <P>Also, although it is possible to then clean up the stack, it's 
            not entirely feasible. Since the function does not know at compile 
            time how many parameters are sent to it, it means it has to 
            manipulate the stack and move around the return value in order to 
            clean up. It's easier to just let the caller clean up the stack in 
            this case.</P>
            <P>Intel supports an instruction to clean up the stack by the 
            callee. It's <CODE lang=asm><SPAN 
            class=cpp-keyword>RET</SPAN></CODE> <CODE>&lt;Byte Count&gt;</CODE> 
            where <CODE lang=text>Byte Count</CODE> is the size in bytes of the 
            parameters on the stack. A 2 byte instruction.</P>
            <H4>So, what is the stack?</H4>
            <P>A stack is a location for temporary storage. Parameters are 
            pushed onto the stack, then the return address is pushed onto the 
            stack. The flow of execution must know where to return to. The CPU 
            is stupid, it just executes one instruction after the other. You 
            have to tell it where to go. In order to tell it how to get back, we 
            need to save the return address, the location after the function 
            call. There is an assembly instruction that does this for us: <CODE 
            lang=asm><SPAN class=cpp-keyword>CALL</SPAN></CODE>. There is an 
            assembly instruction that uses the current value on the stack and 
            the return address and transfers execution to that location. It's 
            called <CODE lang=asm><SPAN class=cpp-keyword>RET</SPAN></CODE>. 
            Beyond this, we have local variables and possibly even other values 
            that are pushed onto the stack for temporary storage. This is one of 
            the reasons you can never return an array or an address of any local 
            variable, they disappear when the function returns!</P>
            <P>The layout of the stack would be the following:</P><PRE lang=text>[Parameter n          ]
...
[Parameter 2          ]
[Parameter 1          ]
[Return Address       ]
[Previous Base Pointer]
[Local Variables      ]</PRE>
            <P>Before returning, the stack is cleaned up to the return address 
            and then a "return" is issued. If the stack is not kept in proper 
            order, we may get out of sync and return to the wrong address! This 
            can cause a trap, obviously!</P>
            <H4>What is the "base pointer"?</H4>
            <P>The "base pointer" in Intel is generally <CODE 
            lang=asm>EBP</CODE>. What happens is since <CODE lang=asm>ESP</CODE> 
            is dynamic and always changing, you save the old <CODE 
            lang=asm>EBP</CODE> from the previous function, then set <CODE 
            lang=asm>EBP</CODE> to the current stack location. You can now 
            reference variables directly on the stack from a standard offset. 
            This means that the first parameter will always be <CODE 
            lang=asm>EBP</CODE> + <CODE>xx</CODE>, etc. If you do not save <CODE 
            lang=asm>ESP</CODE> and always reference <CODE lang=asm>ESP</CODE>, 
            you're going to have to keep track of how much data is on the stack. 
            If you put more and more data on the stack, the offset to the first 
            parameter changes. The assembler <B>does</B> generate functions when 
            appropriate to not set <CODE lang=asm>EBP</CODE>, so it's not always 
            the case that <CODE lang=asm>EBP</CODE> is the base pointer but 
            rather the function could be using <CODE lang=asm>ESP</CODE> 
            directly.</P>
            <P>Generally, it's <CODE lang=asm>EBP</CODE> + <CODE>Value</CODE> to 
            get to function parameters and <CODE lang=asm>EBP</CODE> - 
            <CODE>Value</CODE> to get to local variables.</P>
            <H4>Putting it all together</H4>
            <P>So, you can now see the reason each thread has its own stack. If 
            they shared the same stack, they would overwrite each other's return 
            values and data! Or, could eventually, if they ran out of stack 
            space. That's the next problem we will discuss.</P>
            <H4>Stack Overflow</H4>
            <P>A Stack Overflow is when you reached the end of your stack. 
            Windows generally gives the program a fixed amount of user mode 
            stack space. The kernel has its own stack. It generally occurs when 
            you run out of stack space! Recursion is a good way to run out of 
            stack space. If you keep recursively calling a function you may 
            eventually run out of stack and trap.</P>
            <P>Windows generally does not allocate all of the stack at once, but 
            instead grows the stack as you need it. This is an optimization 
            obviously.</P>
            <P>We can write a small program to perform a stack overflow and then 
            find out how much stack Windows gave us.</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; g</SPAN>
(<SPAN class=cpp-literal>928.898</SPAN>): Stack overflow - code c00000fd (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
<SPAN class=cpp-keyword>eax</SPAN>=00131ad8 ebx=7ffdf000 <SPAN class=cpp-keyword>ecx</SPAN>=00131ad8 edx=00430df0 <SPAN class=cpp-keyword>esi</SPAN>=<SPAN class=cpp-literal>00000000</SPAN> <SPAN class=cpp-keyword>edi</SPAN>=0003347c
eip=<SPAN class=cpp-literal>00401029</SPAN> esp=00032ffc ebp=<SPAN class=cpp-literal>00033230</SPAN> iopl=<SPAN class=cpp-literal>0</SPAN>         nv up ei pl nz ac po nc
cs=001b  ss=<SPAN class=cpp-literal>0023</SPAN>  <SPAN class=cpp-keyword>ds</SPAN>=<SPAN class=cpp-literal>0023</SPAN>  es=<SPAN class=cpp-literal>0023</SPAN>  fs=<SPAN class=cpp-literal>0038</SPAN>  gs=<SPAN class=cpp-literal>0000</SPAN>             efl=<SPAN class=cpp-literal>00010216</SPAN>
*** WARNING: Unable to verify checksum for COMSTRESS.exe
COMSTRESS!func+<SPAN class=cpp-literal>0x9</SPAN>:
<SPAN class=cpp-literal>00401029</SPAN> <SPAN class=cpp-literal>53</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    ebx
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; !teb</SPAN>
TEB at 7ffde000
    ExceptionList:        0012ffb0
    StackBase:            <SPAN class=cpp-literal>00130000</SPAN>
    StackLimit:           <SPAN class=cpp-literal>00031000</SPAN>
    SubSystemTib:         <SPAN class=cpp-literal>00000000</SPAN>
    FiberData:            <SPAN class=cpp-literal>00001e00</SPAN>
    ArbitraryUserPointer: <SPAN class=cpp-literal>00000000</SPAN>
    Self:                 7ffde000
    EnvironmentPointer:   <SPAN class=cpp-literal>00000000</SPAN>
    ClientId:             <SPAN class=cpp-literal>00000928</SPAN> . <SPAN class=cpp-literal>00000898</SPAN>
    RpcHandle:            <SPAN class=cpp-literal>00000000</SPAN>
    Tls Storage:          <SPAN class=cpp-literal>00000000</SPAN>
    PEB Address:          7ffdf000
    LastErrorValue:       <SPAN class=cpp-literal>0</SPAN>
    LastStatusValue:      <SPAN class=cpp-literal>0</SPAN>
    Count Owned Locks:    <SPAN class=cpp-literal>0</SPAN>
    HardErrorMode:        <SPAN class=cpp-literal>0</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; ? 130000 - 31000</SPAN>
Evaluate expression: <SPAN class=cpp-literal>1044480</SPAN> = 000ff000
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN></PRE>
            <P>To do this, I simply used !teb, which displays all elements of 
            the TEB or "Thread Environment Block" (found at FS:0 as mentioned in 
            a previous tutorial). If you subtract the base of the stack from the 
            stack limit, you get the size. 1,044,480 bytes is how big of a stack 
            Windows gave us.</P>
            <H4>Stack Underflow</H4>
            <P>In general, a Stack Underflow is the opposite of an overflow. 
            You've somehow thought you put more on the stack than you really 
            have and you've popped off too much. You've reached the beginning of 
            the stack and it's empty, but you thought there was more data and 
            kept attempting to pop data off.</P>
            <H4>Overflows and Underflows</H4>
            <P>Overflows and Underflows can also be said to occur when your 
            program gets out of sync and crashes thinking the stack is in a 
            different position. The stack could underflow if you clean up too 
            much in a function and then attempt to return. Your stack is out of 
            sync and you return to the wrong address. The reason your stack is 
            out of sync is you thought you had more data on it than you did. You 
            could consider that an underflow.</P>
            <P>The opposite can also occur. You've cleaned up too little because 
            you didn't think you had that much data on the stack and you return. 
            You trap when you return because you went to the wrong address. You 
            "could" consider this an overflow as you are out of sync, thinking 
            you have less data on the stack than you really do.</P>
            <H3>How does the debugger get a stack trace?</H3>
            <P>This brings me to my next topic, how does a debugger get a stack 
            trace? The first answer is simply by using "Symbols". The symbols 
            can tell the debugger how many parameters are on the stack, how many 
            local variables, etc., so the debugger can then use the symbols to 
            determine how to walk the stack and display the information.</P>
            <P>If there are no symbols, it uses the base pointer. Each base 
            pointer points to the previous base pointer. The Base Pointer + 4 
            also points to the return address. This is how it then walks the 
            stack. If everyone uses <CODE lang=asm>EBP</CODE>, the stack trace 
            could be a perfect world. Although the debugger does not know how 
            many parameters there are, it just dumps the location where the 
            parameters <B>WOULD</B> be, it's up to you to interpret what the 
            correct parameters are.</P>
            <P>Here is a simple table of some function calls. I am going to use 
            the stack trace from the first tutorial.</P><PRE lang=text>0:000&gt; kb
ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 77f944a8 00000007 MSVCRT!printf+0x35
0012ff4c 00401147 00000001 00323d70 00322ca8 temp!main+0x44
0012ffc0 77e814c7 77f944a8 00000007 7ffdf000 temp!mainCRTStartup+0xe3
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23</PRE>
            <P>Since <CODE lang=asm>ESP</CODE> will point to local variables, 
            etc., we will dump <CODE lang=asm>EBP</CODE>. I will use the "DDS" 
            command which means 'Dump Dwords with Symbols'. The debugger will 
            attempt to match the value on the stack with the closest symbol.</P>
            <P>Our current <CODE lang=asm>EBP</CODE> value is 0012fef4. This is 
            a pointer on the stack, remember? This value points to the previous 
            <CODE lang=asm>EBP</CODE>. Remember, <CODE lang=asm>EBP</CODE> + 4 
            == return value, <CODE lang=asm>EBP</CODE> + 8 == Parameters. The 
            bold walks the stack to each <CODE lang=asm>EBP</CODE> value.</P><PRE lang=text>[Stack Address |  Value  | Description]
0012fef4  <B>0012ff38</B>
0012fef8  77c3e68d MSVCRT!printf+0x35
0012fefc  77c5aca0 MSVCRT!_iob+0x20
0012ff00  00000000
0012ff04  0012ff44
0012ff08  77c5aca0 MSVCRT!_iob+0x20
0012ff0c  00000000
0012ff10  000007e8
0012ff14  7ffdf000
0012ff18  0012ffb0
0012ff1c  00000001
0012ff20  0012ff0c
0012ff24  0012f8c8
0012ff28  0012ffb0
0012ff2c  77c33eb0 MSVCRT!_except_handler3
0012ff30  77c146e0 MSVCRT!`string'+0x16c
0012ff34  00000000
<B>0012ff38  0012ffc0</B>
0012ff3c  00401044 temp!main+0x44
0012ff40  00000000
0012ff44  77f944a8 ntdll!RtlpAllocateFromHeapLookaside+0x42
0012ff48  00000007
0012ff4c  00000000
0012ff50  00401147 temp!mainCRTStartup+0xe3
0012ff54  00000001
0012ff58  00323d70
0012ff5c  00322ca8
0012ff60  00403000 temp!__xc_a
0012ff64  00403004 temp!__xc_z
0012ff68  0012ffa4
0012ff6c  0012ff94
0012ff70  0012ffa0
0012ff74  00000000
0012ff78  0012ff98
0012ff7c  00403008 temp!__xi_a
0012ff80  0040300c temp!__xi_z
0012ff84  77f944a8 ntdll!RtlpAllocateFromHeapLookaside+0x42
0012ff88  00000007
0012ff8c  7ffdf000
0012ff90  c0000005
0012ff94  00323d70
0012ff98  00000000
0012ff9c  8053476f
0012ffa0  00322ca8
0012ffa4  00000001
0012ffa8  0012ff84
0012ffac  0012f8c8
0012ffb0  0012ffe0
0012ffb4  00401210 temp!except_handler3
0012ffb8  004020d0 temp!&#8962;MSVCRT_NULL_THUNK_DATA+0x80
0012ffbc  00000000
<B>0012ffc0  0012fff0</B>
0012ffc4  77e814c7 kernel32!BaseProcessStart+0x23
0012ffc8  77f944a8 ntdll!RtlpAllocateFromHeapLookaside+0x42
0012ffcc  00000007
0012ffd0  7ffdf000
0012ffd4  c0000005
0012ffd8  0012ffc8
0012ffdc  0012f8c8
0012ffe0  ffffffff
0012ffe4  77e94809 kernel32!_except_handler3
0012ffe8  77e91210 kernel32!`string'+0x98
0012ffec  00000000
<B>0012fff0  00000000</B>
0012fff4  00000000
0012fff8  00401064 temp!mainCRTStartup</PRE>
            <P>So, <CODE lang=asm>EBP</CODE> points to (0012fef4) which points 
            to the previous <CODE lang=asm>EBP</CODE> of 0012ff38. <CODE 
            lang=asm>EIP</CODE> == 77c3f10b, which is <CODE 
            lang=asm>MSVCRT!_output</CODE>+0x18. We can then dump <CODE 
            lang=asm>EBP</CODE> + 8 as the parameters. The debugger with "KB" 
            generally dumps the first 3 values of the stack. It doesn't know if 
            those are correct parameters or not, it's just a preview. If you 
            want to know the rest, you simply find the location on the stack and 
            dump.</P><PRE lang=text>0012fefc  77c5aca0 MSVCRT!_iob+0x20
0012ff00  00000000
0012ff04  0012ff44</PRE>
            <P>So, we can assemble the first function:</P><PRE lang=text>MSVCRT!_output+0x18(77c5aca0, 00000000, 0012ff44);</PRE>
            <P>The second function is <CODE lang=asm>EBP</CODE> + 4, the return 
            address. Remember, it doesn't know where the functions start. So, 
            the best it can do is match the return address specifying this as 
            the function.</P>
            <P>This is the calling function:</P><PRE lang=text>0012fef8  77c3e68d MSVCRT!printf+0x35</PRE>
            <P>It then goes to the previous <CODE lang=asm>EBP</CODE>, 0012ff38, 
            and adds 8 to get the parameters.</P><PRE lang=text>0012ff40  00000000
0012ff44  77f944a8 ntdll!RtlpAllocateFromHeapLookaside+0x42
0012ff48  00000007</PRE>
            <P>This is the calling function with its parameters.</P><PRE lang=text>MSVCRT!printf+0x35(00000000, 77f944a8, 00000007);</PRE>
            <P>As you can see, if anything is off, this information is wrong. 
            That is why you must use your judgment when interpreting these 
            values.</P>
            <P>The next <CODE lang=asm>EBP</CODE> was :0012ffc0. It's the memory 
            location at 0012ff38. The previous return value is:</P><PRE lang=text>0012ff3c  00401044 temp!main+0x44</PRE>
            <P>The previous parameters were at 0012ffc0 + 8. Remember, this also 
            assumes that <CODE lang=asm>EBP</CODE> was the first value pushed 
            onto the stack. If the debugger is smart enough, it could attempt to 
            just walk the stack until it gets the first recognizable symbol and 
            use that as the return value! That's in case something was pushed 
            onto the stack before <CODE lang=asm>EBP</CODE> was saved and 
            set.</P>
            <P>These are the parameters:</P><PRE lang=text>0012ffc8  77f944a8 ntdll!RtlpAllocateFromHeapLookaside+0x42
0012ffcc  00000007
0012ffd0  7ffdf000

temp!main+0x44(77f944a8, 00000007, 7ffdf000)</PRE>
            <P>Our next <CODE lang=asm>EBP</CODE> was 0012ffc0, so + 4 is the 
            return value. That's our function now.</P><PRE lang=text>0012ffc4  77e814c7 kernel32!BaseProcessStart+0x23</PRE>
            <P>So, <CODE lang=asm>EBP</CODE> = 0012ffc0, points to previous 
            <CODE lang=asm>EBP</CODE> 0012fff0 and we know that previous <CODE 
            lang=asm>EBP</CODE> + 8 == parameters.</P><PRE lang=text>0:000&gt; dds 0012fff0
0012fff0  00000000
0012fff4  00000000  &lt;-- Previous return value is NULL so stop here.
0012fff8  00401064 temp!mainCRTStartup  &lt;-- + 8
0012fffc  00000000
00130000  78746341

kernel32!BaseProcessStart+0x23(00401064, 00000000, 78746341)</PRE>
            <P>This should be good enough since our previous return value is 
            <CODE>NULL</CODE>. So, this is our manual generation of the 
            stack:</P><PRE lang=text>MSVCRT!_output+0x18            (77c5aca0, 00000000, 0012ff44);
MSVCRT!printf+0x35             (00000000, 77f944a8, 00000007);
temp!main+0x44                 (77f944a8, 00000007, 7ffdf000);
kernel32!BaseProcessStart+0x23 (00401064, 00000000, 78746341);</PRE>
            <P>This was our stack trace from the debugger:</P><PRE lang=text>ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 77f944a8 00000007 MSVCRT!printf+0x35
0012ff4c 00401147 00000001 00323d70 00322ca8 temp!main+0x44
0012ffc0 77e814c7 77f944a8 00000007 7ffdf000 temp!mainCRTStartup+0xe3
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23</PRE>
            <P>What's different and why? Well, we followed a simple rule to walk 
            the stack. <CODE lang=asm>EBP</CODE> points to the previous <CODE 
            lang=asm>EBP</CODE>. Secondly, we didn't use symbol information to 
            walk the stack. If I delete the symbols for <I>temp.exe</I>, I get 
            the following stack trace:</P><PRE lang=text>0:000&gt; kb
ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 77f944a8 00000007 MSVCRT!printf+0x35
WARNING: Stack unwind information not available. Following frames may be wrong.
0012ffc0 77e814c7 77f944a8 00000007 7ffdf000 temp+0x1044
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23
0:000&gt;</PRE>
            <P>The same as ours! So, the debugger used symbolic information to 
            walk the stack and display a more accurate picture. However, without 
            symbolic information, there's function calls missing. That means, we 
            cannot always trust the stack trace if symbols are wrong, missing or 
            not complete. If we do not have symbol information for all modules, 
            then we have a problem!</P>
            <P>If I continue with these tutorials, one of the next ones will 
            attempt to explain symbols and validating them. However, I will 
            attempt to show you one trick to validating function calls in this 
            tutorial.</P>
            <P>As we can see, we notice we are missing a function call. How do 
            you validate function calls? By verifying they were made.</P>
            <H3>Verifying Function Calls</H3>
            <P>I ran the program again and got a new stack trace.</P><PRE lang=text>0:000&gt; kb
ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 00000000 00000000 MSVCRT!printf+0x35
WARNING: Stack unwind information not available. Following frames may be wrong.
0012ffc0 77e814c7 00000000 00000000 7ffdf000 temp+0x1044
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23
0:000&gt;</PRE>
            <P>Some of the values on the stack are different, but that's what 
            happens when you run programs again. You're not guaranteed the same 
            run every time!</P>
            <P>This is your first return value: 77c3e68d </P>
            <P>If you un-assemble it, you will get this:</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 77c3e68d</SPAN>
MSVCRT!printf+<SPAN class=cpp-literal>0x35</SPAN>:
77c3e68d <SPAN class=cpp-literal>8945e0</SPAN>           <SPAN class=cpp-keyword>mov</SPAN>     [ebp-<SPAN class=cpp-literal>0x20</SPAN>],<SPAN class=cpp-keyword>eax</SPAN>
77c3e690 <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
77c3e691 ff75e4           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x1c</SPAN>]</PRE>
            <P>The listing reads like this:</P><PRE lang=asm>&lt;<SPAN class=cpp-comment>;address&gt; &lt;opcode&gt; &lt;assembly instruction in english or mnemonic&gt;</SPAN>

77c3e691 ff75e4  <SPAN class=cpp-keyword>push</SPAN> <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x1c</SPAN>]

77c3e691 == Address
ff75e4   == Opcode <SPAN class=cpp-keyword>or</SPAN> machine code.  This is what the CPU understands
<SPAN class=cpp-keyword>push</SPAN> <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x1c</SPAN>]  == Assembly instruction in english. The mnemonic.</PRE>
            <P>This is the return value. What is a return value? It's the next 
            instruction <B>after</B> a call is made. Thus, if we keep 
            subtracting from this value, we will eventually un-assemble the call 
            instruction. The trick is to un-assemble enough to make out the call 
            function. Be warned though, Intel opcodes are variable. That means 
            that they are <B>not</B> a fixed size and un-assembling in the 
            <B>middle</B> of an instruction can generate a completely different 
            instruction and even different instruction list! So, we have to 
            guess. Usually if we go back enough, the instructions eventually get 
            back on track and are unassembled correctly.</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 77c3e68d - 20</SPAN>
MSVCRT!printf+<SPAN class=cpp-literal>0x15</SPAN>:
77c3e66d bdadffff59       <SPAN class=cpp-keyword>mov</SPAN>     ebp,<SPAN class=cpp-literal>0x59ffffad</SPAN>
77c3e672 <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>
77c3e673 8365fc00         and     <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x4</SPAN>],<SPAN class=cpp-literal>0x0</SPAN>
77c3e677 <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
77c3e678 e8c7140000       <SPAN class=cpp-keyword>call</SPAN>    MSVCRT!_stbuf (77c3fb44)
77c3e67d <SPAN class=cpp-literal>8945e4</SPAN>           <SPAN class=cpp-keyword>mov</SPAN>     [ebp-<SPAN class=cpp-literal>0x1c</SPAN>],<SPAN class=cpp-keyword>eax</SPAN>
77c3e680 8d450c           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp+<SPAN class=cpp-literal>0xc</SPAN>]
77c3e683 <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
MSVCRT!printf+<SPAN class=cpp-literal>0x2c</SPAN>:
77c3e684 ff7508           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp+<SPAN class=cpp-literal>0x8</SPAN>]
77c3e687 <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<B>77c3e688 e8660a0000       <SPAN class=cpp-keyword>call</SPAN>    MSVCRT!_output (77c3f0f3)
77c3e68d <SPAN class=cpp-literal>8945e0</SPAN>           <SPAN class=cpp-keyword>mov</SPAN>     [ebp-<SPAN class=cpp-literal>0x20</SPAN>],<SPAN class=cpp-keyword>eax</SPAN></B></PRE>
            <P>As you can see, the return address is 77c3e68d. So, 77c3e688 is 
            the function call. Thus, we are calling <CODE>_output</CODE>! So, 
            that is a correct function call. Want to try another?</P>
            <P>The next return address listed in the stack trace is 00401044. 
            Let's try the same:</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 00401044  - 20</SPAN>
temp+<SPAN class=cpp-literal>0x1024</SPAN>:
<SPAN class=cpp-literal>00401024</SPAN> <SPAN class=cpp-literal>2408</SPAN>             and     al,<SPAN class=cpp-literal>0x8</SPAN>
<SPAN class=cpp-literal>00401026</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401027</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401028</SPAN> 6a04             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x4</SPAN>
0040102a <SPAN class=cpp-literal>6820304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403020</SPAN>
0040102f <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401030</SPAN> ff1500204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2000</SPAN> (<SPAN class=cpp-literal>00402000</SPAN>)]
<SPAN class=cpp-literal>00401036</SPAN> <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
temp+<SPAN class=cpp-literal>0x1037</SPAN>:
<SPAN class=cpp-literal>00401037</SPAN> ff1508204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2008</SPAN> (<SPAN class=cpp-literal>00402008</SPAN>)]
0040103d <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<B>0040103e ff1510204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2010</SPAN> (<SPAN class=cpp-literal>00402010</SPAN>)]
<SPAN class=cpp-literal>00401044</SPAN> <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN></B></PRE>
            <P>Unfortunately yes, this is assembly. This is basically a function 
            pointer. It means call the function at address 00402010.</P>
            <P>Use "DD" to get the value at the address.</P><PRE lang=text>0:000&gt; dd 00402010
00402010  77c3e658</PRE>
            <P>We will now un-assemble this address since we know it's a 
            function call.</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 77c3e658</SPAN>
MSVCRT!printf:
77c3e658 6a10             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x10</SPAN></PRE>
            <P>So, yes, we're calling <CODE>printf</CODE> here.</P>
            <P>The next return value is 77e814c7. Let's see if we're calling 
            <CODE>temp</CODE>.</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 77e814c7 - 20</SPAN>
kernel32!BaseProcessStart+<SPAN class=cpp-literal>0x3</SPAN>:
77e814a7 <SPAN class=cpp-literal>1012</SPAN>             adc     [edx],dl
77e814a9 e977e8288e       <SPAN class=cpp-keyword>jmp</SPAN>     0610fd25
77e814ae ffff             ???
77e814b0 8365fc00         and     <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x4</SPAN>],<SPAN class=cpp-literal>0x0</SPAN>
77e814b4 6a04             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x4</SPAN>
77e814b6 8d4508           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp+<SPAN class=cpp-literal>0x8</SPAN>]
77e814b9 <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
77e814ba 6a09             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x9</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
kernel32!BaseProcessStart+<SPAN class=cpp-literal>0x18</SPAN>:
77e814bc 6afe             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0xfe</SPAN>
77e814be ff159c13e677 <SPAN class=cpp-keyword>call</SPAN> <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [kernel32!_imp__NtSetInformationThread (77e
6139c)]
<B>77e814c4 ff5508           <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp+<SPAN class=cpp-literal>0x8</SPAN>]
77e814c7 <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN></B></PRE>
            <P>It's calling the first parameter. This is the first 
parameter:</P><PRE lang=asm>0012fff0 <SPAN class=cpp-literal>00000000</SPAN> <B><SPAN class=cpp-literal>00401064</SPAN></B> <SPAN class=cpp-literal>00000000</SPAN> <SPAN class=cpp-literal>78746341</SPAN> kernel32!BaseProcessStart+<SPAN class=cpp-literal>0x23</SPAN>

<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 00401064</SPAN>
temp+<SPAN class=cpp-literal>0x1064</SPAN>:
<SPAN class=cpp-literal>00401064</SPAN> <SPAN class=cpp-literal>55</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    ebp
<SPAN class=cpp-literal>00401065</SPAN> 8bec             <SPAN class=cpp-keyword>mov</SPAN>     ebp,esp
<SPAN class=cpp-literal>00401067</SPAN> 6aff             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0xff</SPAN></PRE>
            <P>So, it is calling something inside of <CODE>temp</CODE>. 
            Unfortunately, we can't be certain it's the same function. In order 
            to find that out, we need to un-assemble this function and walk 
            through it. Remember, the call to <CODE>printf</CODE> is at:</P><PRE lang=asm>0040103e ff1510204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2010</SPAN> (<SPAN class=cpp-literal>00402010</SPAN>)]</PRE>
            <P>That means that we have to un-assemble this function from its 
            start all the way to 0401064. Another way to do it would be to use 
            DDS on the stack and find out if there are any other symbols on the 
            stack and verify them.</P>
            <P>If we do DDS on <CODE lang=asm>EBP</CODE>, we find this:</P><PRE lang=text>0:000&gt; dds ebp
0012fef4  0012ff38
0012fef8  77c3e68d MSVCRT!printf+0x35
0012fefc  77c5aca0 MSVCRT!_iob+0x20
0012ff00  00000000
0012ff04  0012ff44
0012ff08  77c5aca0 MSVCRT!_iob+0x20
0012ff0c  00000000
0012ff10  000007e8
0012ff14  7ffdf000
0012ff18  0012ffb0
0012ff1c  00000001
0012ff20  0012ff0c
0012ff24  ffffffff
0012ff28  0012ffb0
0012ff2c  77c33eb0 MSVCRT!_except_handler3
0012ff30  77c146e0 MSVCRT!`string'+0x16c
0012ff34  00000000
0012ff38  0012ffc0
<B>0012ff3c  00401044 temp+0x1044</B>
0012ff40  00000000
0012ff44  00000000
0012ff48  00000000
0012ff4c  00000000
0012ff50  00401147 temp+0x1147
0012ff54  00000001
0012ff58  00322470
0012ff5c  00322cf8
0012ff60  00403000 temp+0x3000
0012ff64  00403004 temp+0x3004
0012ff68  0012ffa4
0012ff6c  0012ff94
0012ff70  0012ffa0
0:000&gt; dds
0012ff74  00000000
0012ff78  0012ff98
0012ff7c  00403008 temp+0x3008
0012ff80  0040300c temp+0x300c
0012ff84  00000000
0012ff88  00000000
0012ff8c  7ffdf000
0012ff90  00000001
0012ff94  00322470
0012ff98  00000000
0012ff9c  8053476f
0012ffa0  00322cf8
0012ffa4  00000001
0012ffa8  0012ff84
0012ffac  e3ce0b30
0012ffb0  0012ffe0
0012ffb4  00401210 temp+0x1210
0012ffb8  004020d0 temp+0x20d0
0012ffbc  00000000
0012ffc0  0012fff0
0012ffc4  77e814c7 kernel32!BaseProcessStart+0x23</PRE>
            <P>There are a lot of unknown <CODE>TEMP</CODE> + <CODE>xxx</CODE> 
            values on the stack! The one in bold is the one we know is the 
            return value for the <CODE>printf()</CODE>. 00401064, we know is the 
            start address of the function called from 
            <CODE>BaseProcessStart()</CODE>. What values are close to this 
            one?</P>
            <P>This is where guess work comes in. If you think that function 
            does not jump backwards, you could attempt to only look at values 
            that are &gt; than this one. You could attempt to un-assemble every 
            single reference, but you have to start somewhere. I would say, look 
            at the symbols closest to this one first. Here is one:</P><PRE lang=asm>0012ff50  <SPAN class=cpp-literal>00401147</SPAN> temp+<SPAN class=cpp-literal>0x1147</SPAN> 

<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 00401147 - 20</SPAN>
temp+<SPAN class=cpp-literal>0x1127</SPAN>:
<SPAN class=cpp-literal>00401127</SPAN> <SPAN class=cpp-literal>40</SPAN>               <SPAN class=cpp-keyword>inc</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401128</SPAN> <SPAN class=cpp-literal>00e8</SPAN>             <SPAN class=cpp-keyword>add</SPAN>     al,ch
0040112a <SPAN class=cpp-literal>640000</SPAN>           <SPAN class=cpp-keyword>add</SPAN>     fs:[<SPAN class=cpp-keyword>eax</SPAN>],al
0040112d 00ff             <SPAN class=cpp-keyword>add</SPAN>     bh,bh
0040112f <SPAN class=cpp-literal>1520204000</SPAN>       adc     <SPAN class=cpp-keyword>eax</SPAN>,<SPAN class=cpp-literal>0x402020</SPAN>
<SPAN class=cpp-literal>00401134</SPAN> 8b4de0           <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>,[ebp-<SPAN class=cpp-literal>0x20</SPAN>]
<SPAN class=cpp-literal>00401137</SPAN> <SPAN class=cpp-literal>8908</SPAN>             <SPAN class=cpp-keyword>mov</SPAN>     [<SPAN class=cpp-keyword>eax</SPAN>],<SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>00401139</SPAN> ff75e0           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x20</SPAN>]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
temp+<SPAN class=cpp-literal>0x113c</SPAN>:
0040113c ff75d4           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x2c</SPAN>]
0040113f ff75e4           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x1c</SPAN>]
<B><SPAN class=cpp-literal>00401142</SPAN> e8b9feffff       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x1000</SPAN> (<SPAN class=cpp-literal>00401000</SPAN>)</B>
<SPAN class=cpp-literal>00401147</SPAN> 83c430           <SPAN class=cpp-keyword>add</SPAN>     esp,<SPAN class=cpp-literal>0x30</SPAN></PRE>
            <P>We found this function call and it looks to be a valid address. 
            The way to distinguish an invalid return value on the stack is, the 
            previous instruction is <B>not</B> a <CODE lang=asm><SPAN 
            class=cpp-keyword>CALL</SPAN></CODE> instruction. That is one way to 
            distinguish return values from just values on the stack that may be 
            a symbol, but not return value.</P>
            <P>Let's un-assemble this one:</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 00401000</SPAN>
temp+<SPAN class=cpp-literal>0x1000</SPAN>:
<SPAN class=cpp-literal>00401000</SPAN> <SPAN class=cpp-literal>51</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>00401001</SPAN> <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401002</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401003</SPAN> 33ff             <SPAN class=cpp-keyword>xor</SPAN>     <SPAN class=cpp-keyword>edi</SPAN>,<SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401005</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401006</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401007</SPAN> 6a03             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x3</SPAN>
<SPAN class=cpp-literal>00401009</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
temp+<SPAN class=cpp-literal>0x100a</SPAN>:
0040100a <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
0040100b <SPAN class=cpp-literal>6800000080</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x80000000</SPAN>
<SPAN class=cpp-literal>00401010</SPAN> <SPAN class=cpp-literal>6810304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403010</SPAN>
<SPAN class=cpp-literal>00401015</SPAN> ff1504204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2004</SPAN> (<SPAN class=cpp-literal>00402004</SPAN>)]
0040101b 8bf0             <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>esi</SPAN>,<SPAN class=cpp-keyword>eax</SPAN>
0040101d 83feff           <SPAN class=cpp-keyword>cmp</SPAN>     <SPAN class=cpp-keyword>esi</SPAN>,<SPAN class=cpp-literal>0xffffffff</SPAN>
<SPAN class=cpp-literal>00401020</SPAN> 741b             jz      temp+<SPAN class=cpp-literal>0x103d</SPAN> (0040103d)
<SPAN class=cpp-literal>00401022</SPAN> 8d442408         <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[esp+<SPAN class=cpp-literal>0x8</SPAN>]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
temp+<SPAN class=cpp-literal>0x1026</SPAN>:
<SPAN class=cpp-literal>00401026</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401027</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401028</SPAN> 6a04             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x4</SPAN>
0040102a <SPAN class=cpp-literal>6820304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403020</SPAN>
0040102f <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401030</SPAN> ff1500204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2000</SPAN> (<SPAN class=cpp-literal>00402000</SPAN>)]
<SPAN class=cpp-literal>00401036</SPAN> <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401037</SPAN> ff1508204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2008</SPAN> (<SPAN class=cpp-literal>00402008</SPAN>)]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x103d</SPAN>:
0040103d <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<BB>0040103e ff1510204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2010</SPAN> (<SPAN class=cpp-literal>00402010</SPAN>)]</B>
<SPAN class=cpp-literal>00401044</SPAN> <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>00401045</SPAN> 5f               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401046</SPAN> 33c0             <SPAN class=cpp-keyword>xor</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,<SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401048</SPAN> 5e               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401049</SPAN> <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>
0040104a c3               <SPAN class=cpp-keyword>ret</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN></PRE>
            <P>This looks like a valid function call and looks like it calls 
            <CODE>printf</CODE>. So, we could then disassemble the original 
            function call until we reached this call, to see if it called it, or 
            if there's yet another function call in between.</P><PRE lang=asm><SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u 0401064</SPAN>
temp+<SPAN class=cpp-literal>0x1064</SPAN>:
<SPAN class=cpp-literal>00401064</SPAN> <SPAN class=cpp-literal>55</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    ebp
<SPAN class=cpp-literal>00401065</SPAN> 8bec             <SPAN class=cpp-keyword>mov</SPAN>     ebp,esp
<SPAN class=cpp-literal>00401067</SPAN> 6aff             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0xff</SPAN>
<SPAN class=cpp-literal>00401069</SPAN> 68d0204000       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x4020d0</SPAN>
0040106e <SPAN class=cpp-literal>6810124000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x401210</SPAN>
<SPAN class=cpp-literal>00401073</SPAN> 64a100000000     <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,fs:[<SPAN class=cpp-literal>00000000</SPAN>]
<SPAN class=cpp-literal>00401079</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
0040107a <SPAN class=cpp-literal>64892500000000</SPAN>   <SPAN class=cpp-keyword>mov</SPAN>     fs:[<SPAN class=cpp-literal>00000000</SPAN>],esp
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>; u</SPAN>
temp+<SPAN class=cpp-literal>0x1081</SPAN>:
<SPAN class=cpp-literal>00401081</SPAN> 83ec20           <SPAN class=cpp-keyword>sub</SPAN>     esp,<SPAN class=cpp-literal>0x20</SPAN>
<SPAN class=cpp-literal>00401084</SPAN> <SPAN class=cpp-literal>53</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    ebx
<SPAN class=cpp-literal>00401085</SPAN> <SPAN class=cpp-literal>56</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>esi</SPAN>
<SPAN class=cpp-literal>00401086</SPAN> <SPAN class=cpp-literal>57</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>edi</SPAN>
<SPAN class=cpp-literal>00401087</SPAN> <SPAN class=cpp-literal>8965e8</SPAN>           <SPAN class=cpp-keyword>mov</SPAN>     [ebp-<SPAN class=cpp-literal>0x18</SPAN>],esp
0040108a 8365fc00         and     <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x4</SPAN>],<SPAN class=cpp-literal>0x0</SPAN>
0040108e 6a01             <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x1</SPAN>
<SPAN class=cpp-literal>00401090</SPAN> ff153c204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x203c</SPAN> (0040203c)]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x1096</SPAN>:
<SPAN class=cpp-literal>00401096</SPAN> <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>00401097</SPAN> 830d40304000ff   <SPAN class=cpp-keyword>or</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x3040</SPAN> (<SPAN class=cpp-literal>00403040</SPAN>)],<SPAN class=cpp-literal>0xffffffff</SPAN>
0040109e 830d44304000ff   <SPAN class=cpp-keyword>or</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x3044</SPAN> (<SPAN class=cpp-literal>00403044</SPAN>)],<SPAN class=cpp-literal>0xffffffff</SPAN>
004010a5 ff1538204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2038</SPAN> (<SPAN class=cpp-literal>00402038</SPAN>)]
004010ab 8b0d3c304000     <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>,[temp+<SPAN class=cpp-literal>0x303c</SPAN> (0040303c)]
004010b1 <SPAN class=cpp-literal>8908</SPAN>             <SPAN class=cpp-keyword>mov</SPAN>     [<SPAN class=cpp-keyword>eax</SPAN>],<SPAN class=cpp-keyword>ecx</SPAN>
004010b3 ff1534204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2034</SPAN> (<SPAN class=cpp-literal>00402034</SPAN>)]
004010b9 8b0d38304000     <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>,[temp+<SPAN class=cpp-literal>0x3038</SPAN> (<SPAN class=cpp-literal>00403038</SPAN>)]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x10bf</SPAN>:
004010bf <SPAN class=cpp-literal>8908</SPAN>             <SPAN class=cpp-keyword>mov</SPAN>     [<SPAN class=cpp-keyword>eax</SPAN>],<SPAN class=cpp-keyword>ecx</SPAN>
004010c1 a130204000       <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[temp+<SPAN class=cpp-literal>0x2030</SPAN> (<SPAN class=cpp-literal>00402030</SPAN>)]
004010c6 8b00             <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[<SPAN class=cpp-keyword>eax</SPAN>]
004010c8 a348304000       <SPAN class=cpp-keyword>mov</SPAN>     [temp+<SPAN class=cpp-literal>0x3048</SPAN> (<SPAN class=cpp-literal>00403048</SPAN>)],<SPAN class=cpp-keyword>eax</SPAN>
004010cd e8e1000000       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x11b3</SPAN> (004011b3)
004010d2 833d2830400000   <SPAN class=cpp-keyword>cmp</SPAN>     <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x3028</SPAN> (<SPAN class=cpp-literal>00403028</SPAN>)],<SPAN class=cpp-literal>0x0</SPAN>
004010d9 750c             <SPAN class=cpp-keyword>jnz</SPAN>     temp+<SPAN class=cpp-literal>0x10e7</SPAN> (<SPAN class=cpp-literal>004010e7</SPAN>)
004010db 68b0114000       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x4011b0</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x10e0</SPAN>:
<SPAN class=cpp-literal>004010e0</SPAN> ff152c204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x202c</SPAN> (0040202c)]
<SPAN class=cpp-literal>004010e6</SPAN> <SPAN class=cpp-literal>59</SPAN>               <SPAN class=cpp-keyword>pop</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>004010e7</SPAN> e8ac000000       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x1198</SPAN> (<SPAN class=cpp-literal>00401198</SPAN>)
004010ec 680c304000       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x40300c</SPAN>
004010f1 <SPAN class=cpp-literal>6808304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403008</SPAN>
004010f6 e897000000       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x1192</SPAN> (<SPAN class=cpp-literal>00401192</SPAN>)
004010fb a134304000       <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[temp+<SPAN class=cpp-literal>0x3034</SPAN> (<SPAN class=cpp-literal>00403034</SPAN>)]
<SPAN class=cpp-literal>00401100</SPAN> 8945d8           <SPAN class=cpp-keyword>mov</SPAN>     [ebp-<SPAN class=cpp-literal>0x28</SPAN>],<SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x1103</SPAN>:
<SPAN class=cpp-literal>00401103</SPAN> 8d45d8           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp-<SPAN class=cpp-literal>0x28</SPAN>]
<SPAN class=cpp-literal>00401106</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401107</SPAN> ff3530304000     <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x3030</SPAN> (<SPAN class=cpp-literal>00403030</SPAN>)]
0040110d 8d45e0           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp-<SPAN class=cpp-literal>0x20</SPAN>]
<SPAN class=cpp-literal>00401110</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401111</SPAN> 8d45d4           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp-<SPAN class=cpp-literal>0x2c</SPAN>]
<SPAN class=cpp-literal>00401114</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401115</SPAN> 8d45e4           <SPAN class=cpp-keyword>lea</SPAN>     <SPAN class=cpp-keyword>eax</SPAN>,[ebp-<SPAN class=cpp-literal>0x1c</SPAN>]
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x1118</SPAN>:
<SPAN class=cpp-literal>00401118</SPAN> <SPAN class=cpp-literal>50</SPAN>               <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>eax</SPAN>
<SPAN class=cpp-literal>00401119</SPAN> ff1524204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2024</SPAN> (<SPAN class=cpp-literal>00402024</SPAN>)]
0040111f <SPAN class=cpp-literal>6804304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403004</SPAN>
<SPAN class=cpp-literal>00401124</SPAN> <SPAN class=cpp-literal>6800304000</SPAN>       <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-literal>0x403000</SPAN>
<SPAN class=cpp-literal>00401129</SPAN> e864000000       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x1192</SPAN> (<SPAN class=cpp-literal>00401192</SPAN>)
0040112e ff1520204000     <SPAN class=cpp-keyword>call</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [temp+<SPAN class=cpp-literal>0x2020</SPAN> (<SPAN class=cpp-literal>00402020</SPAN>)]
<SPAN class=cpp-literal>00401134</SPAN> 8b4de0           <SPAN class=cpp-keyword>mov</SPAN>     <SPAN class=cpp-keyword>ecx</SPAN>,[ebp-<SPAN class=cpp-literal>0x20</SPAN>]
<SPAN class=cpp-literal>00401137</SPAN> <SPAN class=cpp-literal>8908</SPAN>             <SPAN class=cpp-keyword>mov</SPAN>     [<SPAN class=cpp-keyword>eax</SPAN>],<SPAN class=cpp-keyword>ecx</SPAN>
<SPAN class=cpp-literal>0</SPAN>:<SPAN class=cpp-literal>000</SPAN>&gt;<SPAN class=cpp-comment>;</SPAN>
temp+<SPAN class=cpp-literal>0x1139</SPAN>:
<SPAN class=cpp-literal>00401139</SPAN> ff75e0           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x20</SPAN>]
0040113c ff75d4           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x2c</SPAN>]
0040113f ff75e4           <SPAN class=cpp-keyword>push</SPAN>    <SPAN class=cpp-keyword>dword</SPAN> <SPAN class=cpp-keyword>ptr</SPAN> [ebp-<SPAN class=cpp-literal>0x1c</SPAN>]
<B><SPAN class=cpp-literal>00401142</SPAN> e8b9feffff       <SPAN class=cpp-keyword>call</SPAN>    temp+<SPAN class=cpp-literal>0x1000</SPAN> (<SPAN class=cpp-literal>00401000</SPAN>)</B>
<SPAN class=cpp-literal>00401147</SPAN> 83c430           <SPAN class=cpp-keyword>add</SPAN>     esp,<SPAN class=cpp-literal>0x30</SPAN></PRE>
            <P>If you know assembly, you can simply read through the logic and 
            bet that it could have made it here or if it could not make it here. 
            If it could, then provided two functions do not share the same 
            assembled code base, there are two function calls missing. Now, if 
            you just find their return values on the stack, you can find their 
            parameter list. What can we assume from this? Some of these 
            functions do not use <CODE lang=asm>EBP</CODE>, thus we could not 
            get an accurate stack trace. When that happens, we need to verify 
            our trace. As we can see, the previous function did not call 
            <CODE>printf</CODE>, but another one did that it called.</P>
            <P>00401147 is the missing return value. If we find it on the stack, 
            we can update the correct parameters:</P><PRE lang=text>00000000
00401147 temp+0x1147
00000001
00322470
00322cf8</PRE>
            <P>So, here's the one generated from KB:</P><PRE lang=text>0:000&gt; kb
ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 00000000 00000000 MSVCRT!printf+0x35
WARNING: Stack unwind information not available. Following frames may be wrong.
0012ffc0 77e814c7 00000000 00000000 7ffdf000 temp+0x1044
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23
0:000&gt;</PRE>
            <P>Here's our modified one:</P><PRE lang=text>ChildEBP RetAddr  Args to Child
0012fef4 77c3e68d 77c5aca0 00000000 0012ff44 MSVCRT!_output+0x18
0012ff38 00401044 00000000 00000000 00000000 MSVCRT!printf+0x35
WARNING: Stack unwind information not available. Following frames may be wrong.

<B>xxxxxxxx  0401147  00000001 00322470 00322cf8 temp+0x1044</B>
0012ffc0 77e814c7 00000000 00000000 7ffdf000 <B>temp+0x1147</B>
0012fff0 00000000 00401064 00000000 78746341 kernel32!BaseProcessStart+0x23
0:000&gt;</PRE>
            <P>We know that the <CODE>temp</CODE> that calls 
            <CODE>printf()</CODE> is <CODE>main()</CODE>. So, <CODE>argc</CODE> 
            = 1, <CODE>*argv[]</CODE> = 322470.</P>
            <P><CODE>*argv[]</CODE> is a pointer to an array of pointers which 
            are ANSI strings.</P><PRE lang=text>0:000&gt; dd 322470
00322470  <B>00322478</B> 00000000 706d6574 ababab00
00322480  abababab feeefeab 00000000 00000000
00322490  000500c5 feee0400 00325028 00320178
003224a0  feeefeee feeefeee feeefeee feeefeee
003224b0  feeefeee feeefeee feeefeee feeefeee
003224c0  feeefeee feeefeee feeefeee feeefeee
003224d0  feeefeee feeefeee feeefeee feeefeee
003224e0  feeefeee feeefeee feeefeee feeefeee
0:000&gt; da <B>00322478</B>
00322478  "temp"</PRE>
            <P>Dumping the array, which only contains 1 string as per 
            <CODE>argc</CODE>, we can then use the "da" command to view that 
            string as shown above.</P>
            <H2>Multiple Return Addresses On The Stack?</H2>
            <P>Why are there multiple return addresses on the stack? The stack 
            may generally be initialized to zero, but as it's being used, it 
            becomes dirty. You know that local variables aren't always 
            initialized, so if you make a function call, those values aren't 
            reset to zero when the stack moves up. If you pop a value off the 
            stack, the stack may decrement, but the values stay unless they are 
            physically cleaned up. Sometimes, the stack optimizes things and 
            doesn't clean up variables as well. So, seeing "ghost" values on the 
            stack is very common.</P>
            <P>This is not always desirable to leave values on the stack. For 
            example, if your function puts the password on the stack and traps 
            sometime later. A stack dump may still show the password on the 
            stack! So, sometimes when you have sensitive information, you may 
            want to clean up the values on the stack before you return. One way 
            to do this is with the <CODE>SecureZeroMemory()</CODE> API. This can 
            be used to clear memory securely as calling other APIs may be 
            "optimized" out of the code, for example, if you call them before 
            you return. The compiler knows you're not going to use the variable 
            anymore and may not perform the clearing.</P>
            <H2>Buffer Overflows</H2>
            <P>Buffer overflows are a common occurrence on the stack. The stack 
            grows down in memory, but arrays grow up in memory. This is because 
            you usually "increment" a pointer or array when using it to get to 
            the next index, rather than decrementing it. Thus let's say this was 
            your C function:</P><PRE>{
      DWORD MyArray[<SPAN class=cpp-literal>4</SPAN>];
      <SPAN class=cpp-keyword>int</SPAN> Index;</PRE>
            <P>That would evaluate to a stack like this:</P><PRE lang=text>424 [Return Address               ]
420 [ Previous Base Pointer       ]
416 [ Local Array Variable Index 3]
412 [ Local Array Variable Index 2]
408 [ Local Array Variable Index 1]
404 [ Local Array Variable Index 0]
400 [ Local Integer Value         ]</PRE>
            <P>As you can see, if you index your array to <CODE>MyArray[<SPAN 
            class=cpp-literal>4</SPAN>]</CODE> or <CODE>MyArray[<SPAN 
            class=cpp-literal>5</SPAN>]</CODE>, you overwrite critical values 
            that may cause you to trap! Overwriting the previous base pointer 
            may not harm if the calling function does not use it anymore. 
            However, overwriting the return address will most definitely cause a 
            trap! This is why you must always be careful to stay within your 
            array boundaries when dealing with local variables. You could 
            overwrite other local variables, the return address, the parameters, 
            or just about anything!</P>
            <H3>Windows 2003</H3>
            <P>Windows 2003 has a new method to attempt to prevent buffer 
            overflows. This can be compiled in VS.NET using the GS flags. A 
            random value is generated as a cookie on startup of the application. 
            The cookie is then XOR'd with the return address of the function and 
            placed on the stack after the base pointer. This is a simple 
            example:</P><PRE lang=text>[Return Address            ]
[Previous Base Pointer     ]
[Cookie XOR Return Address ]</PRE>
            <P>Upon return, the cookie is checked against the return value. If 
            they're unchanged, then the return occurs, if not, then we have a 
            problem. The reason for this security is not to prevent code from 
            trapping without proper handling, but rather to protect code from 
            executing injected code. A security risk is when someone finds out 
            how to overflow a buffer with actual code and an address to that 
            code. This will cause the program to return to and execute that 
            code.</P>
            <P>This URL provides the full details of this:</P>
            <UL>
              <LI><A 
              href="http://msdn.microsoft.com/library/?url=/library/en-us/dv_vstechart/html/vctchCompilerSecurityChecksInDepth.asp?frame=true" 
              target=_blank>MSDN</A> </LI></UL>
            <H2>Conclusion</H2>
            <P>I have confused beginners and probably bored advanced 
            programmers, however, it's hard to portray advanced concepts in a 
            simple manner. I am trying my best though. If you like or dislike 
            these tutorials, leave me a comment. If you want these to end, let 
            me know too!</P>
            <P>I've probably started off too simple then got too advanced too 
            fast. I can't help it though, programmers should study this 
            information and supplement it with other sources to gain full 
            knowledge on the subject. Do not take what you read or posted on 
            message boards as concrete fact. Everyone is human, everyone errors 
            and not one person knows everything. These sites let just about 
            anyone post information, so always be skeptical. Let me know if you 
            found an error. Thanks.</P><!-- Article Ends --></DIV></SPAN>
            <SCRIPT 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/togglePre.js" 
            type=text/javascript></SCRIPT>

            <H2>About Toby Opferman</H2>
            <DIV style="OVERFLOW: hidden">
            <TABLE border=0>
              <TBODY>
              <TR vAlign=top>
                <TD class=smallText noWrap><IMG 
                  src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/{1D312E1D-1B8D-47F8-8ED1-2985F85E7E68}.gif"><BR></TD>
                <TD class=smallText>Toby Opferman has worked in just about all 
                  aspects of Windows development including applications, 
                  services and drivers.<BR><BR>He has also played a variety of 
                  roles professionally on a wide range of projects. This has 
                  included pure researching roles, architect roles and developer 
                  roles. He also was also solely responsible for debugging traps 
                  and blue screens for a number of years.<BR><BR>Previously of 
                  Citrix Systems he is very experienced in the area of Terminal 
                  Services. His current occupation is unknown.
                  <P class=smallText>Click <A 
                  href="http://www.codeproject.com/script/profile/whos_who.asp?vt=arts&amp;id=961412">here</A> 
                  to view Toby Opferman's online 
            profile.</P></TD></TR></TBODY></TABLE></DIV><BR>
            <TABLE cellPadding=4 width="100%" border=0>
              <TBODY>
              <TR vAlign=top>
                <TD width="100%">
                  <H2>Other popular Debug tips articles:</H2>
                  <UL>
                    <LI><A 
                    href="http://www.codeproject.com/debug/pseudoregister.asp">An 
                    introduction to debugging in MSVC++ using 
Pseudoregisters</A>
                    <DIV class=smallText>Explanation of the debugger 
                    pseudoregisters like @ERR, @TIB</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/debug/survivereleasever.asp">Surviving 
                    the Release Version</A>
                    <DIV class=smallText>Learn about the issues and differences 
                    between Debug and Release builds.</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/debug/mapfile.asp">Finding 
                    crash information using the MAP file</A>
                    <DIV class=smallText>Finding crash information using the MAP 
                    file: how to create and read the file</DIV>
                    <LI><A 
                    href="http://www.codeproject.com/debug/releasemode.asp">Debugging 
                    Release Mode Problems</A>
                    <DIV class=smallText>A classic article on how to debug your 
                    release build applications</DIV></LI></UL></TD>
                <TD width=360>
                  <SCRIPT language=javascript>document.write("<IFRAME src=\"/script/ann/ServeHTML.aspx?C=False&id=2503&cb=4787732\" border=0 frameborder=0 scrolling=no width=300 height=250></IFRAME>");</SCRIPT>
                </TD></TR></TBODY></TABLE>
            <FORM action=/script/rating/code/app/insert_vote.asp 
            method=post><INPUT type=hidden value=cdbntsd2/debug3/20/2004 
            name=vote_name> <INPUT type=hidden value=/debug/cdbntsd2.asp 
            name=goal> 
            <TABLE cellSpacing=0 cellPadding=1 width="100%" bgColor=#ff9900 
            border=0>
              <TBODY>
              <TR>
                <TD width="100%">
                  <TABLE cellSpacing=0 cellPadding=4 width="100%" 
                  bgColor=#fbedbb border=0>
                    <TBODY>
                    <TR>
                      <TD class=smalltext vAlign=center>[<A 
                        href="http://www.codeproject.com/debug/cdbntsd2.asp#__top">Top</A>]</TD>
                      <TD vAlign=center noWrap align=right><A 
                        href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp"><B>Sign 
                        in</B></A> to vote for this 
                        article:&nbsp;&nbsp;&nbsp;&nbsp; <I>Poor</I><INPUT 
                        style="disabled: true" type=radio value=1 
                        name=rate><INPUT style="disabled: true" type=radio 
                        value=2 name=rate><INPUT style="disabled: true" 
                        type=radio value=3 name=rate><INPUT 
                        style="disabled: true" type=radio value=4 
                        name=rate><INPUT style="disabled: true" type=radio 
                        value=5 name=rate><I>Excellent</I>&nbsp;&nbsp;<INPUT class=FormButton style="disabled: true" type=submit value=Vote> 
                      </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></FORM>
            <CENTER>
            <TABLE cellSpacing=0 cellPadding=0 border=0>
              <TBODY>
              <TR>
                <TD 
                style="PADDING-RIGHT: 2px; PADDING-LEFT: 2px; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; BACKGROUND-COLOR: #eee" 
                width=120 height=60>
                  <DIV align=center>
                  <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=2249&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FGrid%5F120x60%2Egif&C=False&id=2249&cb=4787735\" alt=\"\" border=0 width=120 height=60></a>");</SCRIPT>
                  </DIV></TD>
                <TD width=100>&nbsp;</TD>
                <TD width=468 height=60><SPAN id=AdBanner5>
                  <SCRIPT language=javascript>document.write("<a href=\"/script/admentor/admentorredir.asp?id=2244&way=ban\" target=_blank><img src=\"/script/ann/ServeImg.aspx?File=%2Fscript%2Fadmentor%2Fimages%2FUTB%5F468x60%2Egif&C=False&id=2244&cb=4787723\" alt=\"\" border=0 width=468 height=60></a>");</SCRIPT>
                  </SPAN></TD></TR></TBODY></TABLE></CENTER><A name=__comments></A>
            <SCRIPT language=JavaScript>
var Selected = "";

var AdTime = new Date();


// Ensures the expanded message appears reasonably close to where 
// it should appear: on screen, and if possible, under the mouse cursor.
function SwitchMessage(e)
{
   if ( !e ) e = window.event;
   var target = e.target ? e.target : e.srcElement;

   // is it a post?
   while ( target && target.id != 'DynMessLink' )
      target = target.parentNode;
   if ( !target || target.id != 'DynMessLink' )
      return;

   if (Selected)
   {
      var body = document.getElementById(Selected + "_h1");
      if (body)
         body.style.display = 'none';
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#FEF9E7';
   }

   if (Selected == target.name) // just collapse
      Selected="";
   else
   {
      Selected = target.name;
      var body = document.getElementById(Selected + "_h1");
      if (body)
      {
         if (body.style.display=='none')
            body.style.display='';
         else
            body.style.display = 'none';
      }
      var head = document.getElementById(Selected + "_h0");
      if (head)
         head.bgColor = '#99CCFF';

      if ( body && head && body.style.display != 'none' )
      {
         // the bit that keeps the post on-screen and under the cursor
         //var dif = (getRealPos(head, "Top") + head.offsetHeight/2) - (document.body.scrollTop+e.clientY);
         //document.body.scrollTop += dif;
         document.body.scrollTop = getRealPos(head, "Top") - document.body.clientHeight/10;
         EnsureMessageVisible(target.name, true);
      }
   }

   if ( e.preventDefault )
      e.preventDefault();
   else
      e.returnValue = false;
   return false;
}

// does its best to make a message visible on-screen (vs. scrolled off somewhere).
function EnsureMessageVisible(msgID, bShowTop) {
   var msgHeader = document.getElementById(msgID + "_h0");
   var msgBody = document.getElementById(msgID + "_h1");

   // determine scroll position of top and bottom
   var scrollContainer = document.body;
   var top = getRealPos(msgHeader, 'Top');
   var bottom = getRealPos(msgBody, 'Top') + msgBody.offsetHeight;

   // if not already visible, scroll to make it so
   if ( scrollContainer.scrollTop > top && !bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
   if ( scrollContainer.scrollTop+scrollContainer.clientHeight < bottom )
      scrollContainer.scrollTop = bottom-scrollContainer.clientHeight;
   if ( scrollContainer.scrollTop > top && bShowTop)
      scrollContainer.scrollTop = top - document.body.clientHeight/10;
}

// utility
function getRealPos(i,which)
{
   iPos = 0
   while (i!=null)
   {
      iPos += i["offset" + which];
      i = i.offsetParent;
   }
   return iPos
}


</SCRIPT>

            <DIV id=_MessageBoard onclick=SwitchMessage(event)>
            <TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#ff9900 
            border=0>
              <TBODY>
              <TR>
                <TD width="100%">
                  <TABLE id=ForumTable cellSpacing=1 cellPadding=0 width="100%" 
                  bgColor=#ff9900 border=0>
                    <TBODY>
                    <TR>
                      <TD class=smallText bgColor=#ffcc99><B 
                        class=forum_hilite>Note</B>: You must <A 
                        href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp"><B>Sign 
                        in</B></A> to post to this message board.</TD></TR>
                    <FORM 
                    action=/script/comments/app/do_filtermessages.asp?main=/debug/cdbntsd2.asp&amp;df=100&amp;forumid=36054 
                    method=post>
                    <TR>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=3 width="100%" 
                        bgColor=white border=0>
                          <TBODY>
                          <TR bgColor=#fbedbb>
                            <TD class=smalltext noWrap><A 
                              href="http://www.codeproject.com/script/comments/faq.asp"><IMG 
                              height=16 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/forum_faq.gif" 
                              width=16 align=absMiddle border=0> 
                            <B>FAQ</B></A>&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap 
                              align=right>Message score threshold <SELECT 
                              class=smalltext size=1 name=noise><OPTION 
                                value=1>1.0</OPTION> <OPTION 
                                value=2>2.0</OPTION> <OPTION value=3 
                                selected>3.0</OPTION> <OPTION 
                                value=4>4.0</OPTION> <OPTION 
                              value=5>5.0</OPTION></SELECT>&nbsp;&nbsp;</TD>
                            <TD class=smalltext vAlign=center noWrap align=right 
                            colSpan=2><A 
                              href="http://www.codeproject.com/script/comments/search_comments.asp?forumid=36054"><IMG 
                              height=15 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/forum_search.gif" 
                              width=16 border=0> Search comments</A> &nbsp;</TD>
                            <TD vAlign=top align=right><INPUT class=FormButton type=submit value="Set Options" name=submit></TD></TR>
                          <TR bgColor=#ff9900>
                            <TD width="100%">&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap 
                              align=right>View <SELECT class=smalltext size=1 
                              name=expand><OPTION value=0>Normal 
                                (slow)</OPTION> <OPTION value=2>Preview 
                                (slow)</OPTION> <OPTION value=5 selected>Message 
                                View</OPTION> <OPTION value=6>Topic 
                                View</OPTION> <OPTION value=1>Thread 
                                View</OPTION> <OPTION value=3>Expanded 
                                (Supporters only)</OPTION></SELECT>&nbsp;&nbsp;</TD>
                            <TD class=smalltext vAlign=top noWrap>Per page 
                              <SELECT class=smalltext size=1 
                                name=perpage><OPTION value=10>10</OPTION> 
                                <OPTION value=25 selected>25</OPTION> <OPTION 
                                value=50>50 (must logon)</OPTION></SELECT></TD>
                            <TD 
                    colSpan=2>&nbsp;</TD></TR></TBODY></TABLE></TD></TR></FORM>
                    <TR bgColor=#fbedbb>
                      <TD><A name=xx0xx></A>
                        <TABLE cellPadding=2 width="100%" bgColor=#fbedbb 
                        border=0>
                          <TBODY>
                          <TR>
                            <TD>&nbsp;</TD>
                            <TD class=messagetitle>Msgs 1 to 16 of 16 (Total: 
                              16) (<A 
                              href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054">Refresh</A>)</TD>
                            <TD noWrap align=right><FONT 
                              class=messagetitle><SPAN 
                              class=HoverLink>First</SPAN> <SPAN 
                              class=HoverLink>Prev</SPAN> <SPAN 
                              class=HoverLink>Next</SPAN> <SPAN 
                              class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
                              </FONT></TD></TR></TBODY></TABLE></TD></TR>
                    <TR bgColor=white>
                      <TD>
                        <TABLE cellSpacing=0 cellPadding=0 width="100%" 
border=0>
                          <TBODY>
                          <TR>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=2 bgColor=#fbedbb 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD class=messagetitle 
                                width="100%">Subject&nbsp;</TD>
                                <TD class=messagetitle noWrap 
                                width=140>Author&nbsp;</TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT 
                                class=messagetitle>Date&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1379300_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1379300xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1379300#xx1379300xx" 
                                name=1379300><B>Excellent article</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1705546"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>Qasida</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>12:32 21 
                                Feb 
                            '06</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1379300_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I found 
                                this article to be a quantum leap for me as I am 
                                a virtual beginner in the world of debugging 
                                (kernel + user mode, etc), and this was actually 
                                the first tutorial that gave me the additional 
                                knowledge necessary to troubleshoot at a deeper 
                                level in WinDbg, etc. without relying simply on 
                                "!analyze -v" and trying to stumble through the 
                                debugger help file. Thanks a bunch Toby. 
                                <BR><BR>chris <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1379300&amp;forumid=36054&amp;select=1379300#xx1379300xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1379300#xx1379300xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 2.0 (1 
                                vote). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1></TD></TR>
                          <TR id=1172225_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1172225xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1172225#xx1172225xx" 
                                name=1172225><B>Error</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=961412"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>Toby 
                                Opferman</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>1:32 24 
                                Jul 
                            '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1172225_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>"Fast 
                                Call" in the article should be "This Call". 
                                "Fast Call" is when the first two parameters are 
                                passed in using ECX and EDX. "This Call" is when 
                                C++ passes the this pointer in 
                                ECX.<BR><BR><BR><BR>8bc7c0ec02c0e404c0cc0680f7018827ebee<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1172225&amp;forumid=36054&amp;select=1172225#xx1172225xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1172225#xx1172225xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1></TD></TR>
                          <TR id=1117753_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1117753xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1117753#xx1117753xx" 
                                name=1117753><B>Base pointer</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1546584"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>ArunKumar 
                                Yalamarthy</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>8:50 26 
                                May 
                            '05</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1117753_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Hi 
                                Toby,<BR><BR>You wrote in your article that 
                                <BR>"Generally, it's EBP + Value to get to 
                                function parameters and EBP - Value to get to 
                                local variables"<BR>as you said this is true 
                                when standard stack frames are created 
                                (generally <BR>standard stack frames are created 
                                when optimize size is selected instead of 
                                optimize speed), but when we have optimize 
                                speed, we observe positive offsets of stack like 
                                esp+xxx refering to variables..and it seems FPO 
                                (frame pointer omission data) is generated, can 
                                you explain us (may be by writing one more 
                                article) on how to interpret this FPO 
                                data?<BR><BR><BR><BR>Thanks in 
                                advance<BR>ArunKumar.Y<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1117753&amp;forumid=36054&amp;select=1117753#xx1117753xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1117753#xx1117753xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1119454_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1119454xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle style="COLOR: #aa0000" 
                                width="100%"><A class=messagetitle 
                                id=DynMessLink style="COLOR: #aa0000" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1119454#xx1119454xx" 
                                name=1119454>Re: Base pointer</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=961412"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT class=messagetitle 
                                style="COLOR: #aa0000">Toby 
                                Opferman&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle 
                                style="COLOR: #aa0000">2:38 28 May 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1119454_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Speed 
                                and Size you usually find a mixure of both it 
                                depends on how the function is written and what 
                                it is doing. As an example for size, the "PUSH 
                                EBP MOV EBP, ESP" and the "POP EBP" is 4 bytes. 
                                So, setting up the frame pointer does take some 
                                bytes but it can also optimize out bytes 
                                depending on how the arguements are used in the 
                                function (Dereferencing ESP + x as opposed to 
                                EBP + x however is 1 more byte per 
                                instruction).<BR><BR>The same goes for speed. If 
                                there's no reason for a scratch variable there 
                                could still be a frame pointer. Also remember, 
                                the compiler also attempts to do a good job, 
                                it's not perfect and other options you choose 
                                could also help in determining how certain 
                                functions are generated. <BR><BR>As I mention 
                                though usually applications have a combination 
                                of functions with and without frame 
                                pointers.<BR><BR>In any case, the FPO data is 
                                stored in the PDB symbols and should be 
                                automatically used when you do a "kb" with the 
                                correct symbols. <BR><BR>In the case of a frame 
                                pointer you have EBP + x to get the arguments 
                                and EBP - y to get the variables. In the case of 
                                a stack pointer everything is obviously ESP + x 
                                and ESP + y since there is no valid data below 
                                the stack pointer's current location. The x and 
                                y offsets to variables and parameters will 
                                change with each PUSH in the 
                                function.<BR><BR>Consider this simple 
                                example:<BR><BR>void myfunction(x, y, 
                                z)<BR>{<BR>someotherfunc(x, y, 
                                z);<BR>}<BR><BR>With a frame pointer the code 
                                would probably look like this:<BR><BR>PUSH 
                                EBP<BR>MOV ESP, EBP<BR>PUSH [EBP + 10h]<BR>PUSH 
                                [EBP + 0ch]<BR>PUSH [EBP + 08h]<BR>CALL 
                                someotherfunc<BR>POP EBP<BR>RET 0Ch<BR><BR>With 
                                no frame pointer the code would look like 
                                this:<BR><BR>PUSH [ESP + 0Ch] ; x = ESP + 4, y = 
                                ESP + 8, z = ESP + 12<BR>PUSH [ESP + 0Ch] ; x = 
                                ESP + 8, y = ESP + 12, z = ESP + 16<BR>PUSH [ESP 
                                + 0Ch] ; x = ESP + 12, y = ESP + 16, z = ESP + 
                                20<BR>CALL someotherfunc<BR>RET 0Ch<BR><BR>(Or 
                                it could be generated into a single "JMP" 
                                instruction to the "someotherfunc" obviously, 
                                but that wouldn't fit into an example of using 
                                ESP to reference the stack.)<BR><BR>So, in order 
                                to interprete what exactly is being dereferenced 
                                when ESP is being used you need to know the 
                                location of ESP (i.e., how many PUSHes occured 
                                and how many SUB's occured).<BR><BR>Is this 
                                basically what you are referring to when you 
                                talk about interpreting "FPO" data or do you 
                                mean you want to know how the FPO data is stored 
                                in the debug 
                                symbols?<BR><BR><BR><BR><BR>8bc7c0ec02c0e404c0cc0680f7018827ebee<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1117753&amp;forumid=36054&amp;select=1119454#xx1119454xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1119454#xx1119454xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 5.0 (1 
                                vote). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1125022_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1125022xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1125022#xx1125022xx" 
                                name=1125022>Re: Base pointer</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1546584"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>ArunKumar 
                                Yalamarthy&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>2:11 3 Jun 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1125022_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Thanks! 
                                It was really good explanation 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1117753&amp;forumid=36054&amp;select=1125022#xx1125022xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1125022#xx1125022xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1125355_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1125355xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1125355#xx1125355xx" 
                                name=1125355>Re: Base pointer</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=1546584"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>ArunKumar 
                                Yalamarthy&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>8:43 3 Jun 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1125355_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Thanks 
                                Toby for great explanation, When I am analysing 
                                dr.Watson logs,<BR>as a part of stack traces I 
                                am getting some Text like<BR><BR>FPO: [0,0,3] 
                                ..I really do not know how to interpret this, 
                                Following<BR>is a sample stack back trace I got 
                                from one of customer crashes.<BR><BR>*----&gt; 
                                Stack Back Trace &lt;----*<BR><BR>FramePtr 
                                ReturnAd Param#1 Param#2 Param#3 Param#4 
                                Function Name<BR>0012fdec 003368ec 005a9978 
                                01632350 00336fcb 01632350 ptmap!<NOSYMBOLS> 
                                (FPO: [0,0,3])<BR>0012fdf8 00336fcb 01632350 
                                005a9978 00509cc0 0012feec ptmap!PTMAP_suspend 
                                (FPO: [1,0,2])<BR>0012fe74 005958e7 0012fe88 
                                00509f14 00509cc0 00000001 ptmap!PTMAP_terminate 
                                (FPO: [EBP 0x005a9978] [1,25,4])<BR>005a9a04 
                                00595936 005a0722 005936db 005a0716 005a0710 
                                gefm!CPtmapWinApp::~CPtmapWinApp <BR><BR>It 
                                would be great,If you can throw some light on 
                                what FPO[n1,n2,n3] kind of statements 
                                mean?<BR><BR><BR>Thanks<BR>Arun<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1117753&amp;forumid=36054&amp;select=1125355#xx1125355xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1125355#xx1125355xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1125924_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1125924xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=54><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle style="COLOR: #aa0000" 
                                width="100%"><A class=messagetitle 
                                id=DynMessLink style="COLOR: #aa0000" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1125924#xx1125924xx" 
                                name=1125924>Re: Base pointer</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=961412"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT class=messagetitle 
                                style="COLOR: #aa0000">Toby 
                                Opferman&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle 
                                style="COLOR: #aa0000">21:45 3 Jun 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1125924_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=54><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>WINDBG 
                                Help explains these details under the "k" 
                                command help as the following:<BR><BR><BR>FPO 
                                text Meaning <BR>FPO: [non-Fpo]<BR>No FPO data 
                                for frame. <BR><BR>FPO: [N1,N2,N3]<BR>N1 is the 
                                total number of parameters. <BR>N2 is the number 
                                of DWORDs for the locals. <BR>N3 is number of 
                                registers saved.<BR><BR>FPO: [N1,N2] TrapFrame @ 
                                Address<BR>N1 is the total number of parameters. 
                                <BR>N2 is the number of DWORDs for the locals. 
                                <BR><BR>Address is the address of the trap 
                                frame.<BR><BR>FPO: TaskGate Segment:0<BR>Segment 
                                is task gate segment selector. <BR><BR>FPO: [EBP 
                                0xBase]<BR>Base is the base pointer for the 
                                frame. <BR><BR><BR>---------------<BR><BR>The 
                                number of parameters and the number of DWORDS 
                                reserved for locals is probably self 
                                explainatory. The "registers saved" may confuse 
                                a little however it simply means that when you 
                                call this function it will save the values that 
                                are currently residing in certain CPU registers 
                                so they do not get overwritten when the function 
                                is being executed.<BR><BR>I never use this 
                                information (But I also don't use Doctor Watson 
                                logs) since I just end up reading the assembly 
                                and it shows everything anyway. Then again I'm 
                                probably one of the only people ever debugged 
                                java script via IE at the assembly 
                                level.<BR><BR><BR>8bc7c0ec02c0e404c0cc0680f7018827ebee<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=1117753&amp;forumid=36054&amp;select=1125924#xx1125924xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1125924#xx1125924xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 4.5 (3 
                                votes). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1></TD></TR>
                          <TR id=784437_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx784437xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=784437#xx784437xx" 
                                name=784437><B>Use callstack to fixed 
                                bugs.</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=539818"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>autodebug</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>20:55 5 
                                Apr 
                            '04</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=784437_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Yes, 
                                callstack can used to fixed 
                                bugs.<BR><BR><BR>---------------------------<BR>Auto 
                                Debug for Windows<BR><A 
                                href="http://www.autodebug.com/">http://www.autodebug.com/</A><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=784437&amp;forumid=36054&amp;select=784437#xx784437xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=784437#xx784437xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1></TD></TR>
                          <TR id=778782_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx778782xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=778782#xx778782xx" 
                                name=778782><B>Good Article</B></A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=61244"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B>rromerot</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle><B>9:02 30 
                                Mar 
                            '04</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=778782_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Brings 
                                back good memories of when I first started 
                                programming in assembler, way back when. 
                                <BR><BR>Ray<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=778782&amp;forumid=36054&amp;select=778782#xx778782xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=778782#xx778782xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=791701_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx791701xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=791701#xx791701xx" 
                                name=791701>Re: Good Article</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=906348"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>MichaelB76&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>10:17 14 Apr 
                                '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=791701_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Useful 
                                and well written. <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=778782&amp;forumid=36054&amp;select=791701#xx791701xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=791701#xx791701xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR height=1>
                            <TD bgColor=#ff9900><IMG height=1 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1></TD></TR>
                          <TR id=776907_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx776907xx></A><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle style="COLOR: #aaaaaa" 
                                width="100%"><A class=messagetitle 
                                id=DynMessLink style="COLOR: #aaaaaa" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=776907#xx776907xx" 
                                name=776907><B>Please stop writing 
                                tutorials.</B></A></TD>
                                <TD vAlign=bottom noWrap><IMG height=13 
                                alt="Unconfirmed/Anonymous posting" 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/usersuss.gif" 
                                width=15></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT class=messagetitle 
                                style="COLOR: #aaaaaa"><B>Anonymous</B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle 
                                style="COLOR: #aaaaaa"><B>6:05 28 Mar 
                                '04</B>&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=776907_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>This 
                                was the biggest pile of crap i've ever taken the 
                                time to read. You seem to know very little about 
                                this subject, you seem to know the keywords, and 
                                in general what they mean. But this tutorial 
                                will be read by other people, who will be under 
                                the false impression that this information is 
                                true. The number of significant errors in this 
                                article is overwhelming. Please Tony, stop 
                                adding to the ignorance. I feel that i'm 
                                stupider for having read this article, please 
                                don't contribute more innacurate 
                                garbage.<BR><BR>cheers,<BR>jordan 
                                <BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=776907#xx776907xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=776907#xx776907xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 1.0 
                                (20 votes). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=777043_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx777043xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle style="COLOR: #aa0000" 
                                width="100%"><A class=messagetitle 
                                id=DynMessLink style="COLOR: #aa0000" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=777043#xx777043xx" 
                                name=777043>Re: Please stop writing 
                                tutorials.</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=961412"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT class=messagetitle 
                                style="COLOR: #aa0000">Toby 
                                Opferman&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle 
                                style="COLOR: #aa0000">12:16 28 Mar 
                                '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=777043_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I think 
                                the real truth is that you know nothing about 
                                the subject. First of all, you remain anonymous 
                                and second of all you have not justified any of 
                                your claims. <BR><BR>If there are errors, I 
                                welcome you to actually list and correct them 
                                instead of randomly posting junk. You did not 
                                even spell my name correct in your post... I 
                                think there are more errors in your post than in 
                                this article.<BR><BR>Perhaps your "truth" or 
                                what you think is the "truth" is actually 
                                incorrect so when you actually see the truth, 
                                you dismiss it because you don't know any 
                                better...<BR><BR>I actually think you should 
                                stop posting because people may think you might 
                                know something, but posting anonymously and not 
                                justifying any claims make it obvious you're a 
                                fraud.<BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=777043#xx777043xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=777043#xx777043xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 4.6 (9 
                                votes). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=804498_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx804498xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=804498#xx804498xx" 
                                name=804498>Re: Please stop writing 
                                tutorials.</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=741829"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><B><I><FONT 
                                color=#ff8000>toxcct</FONT></I></B>&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>14:54 27 Apr 
                                '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=804498_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>well, i 
                                didn't take time to read you 3 tutorials, si i 
                                won't vote for something i didn't read, but when 
                                i saw the lenght of that article .... wow 
                                perhaps one day i'll find the time out. <IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/smiley_smile.gif" 
                                align=absMiddle><BR>anyway, even if don't "like" 
                                your post (sorry for the prejudice), i quite 
                                like you answer to a certain <FONT 
                                style="COLOR: gray"><B>Anonymous</B></FONT>...<BR>congratulations, 
                                you put him on place <IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/smiley_smile.gif" 
                                align=absMiddle><BR><BR>Welcome on CP toby <IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/smiley_wink.gif" 
                                align=absMiddle><BR><BR><BR>
                                <HR>

                                <P 
                                style="PADDING-RIGHT: 2px; PADDING-LEFT: 2px; FILTER: Glow(color=#00FF00, strength=5, strength=2); PADDING-BOTTOM: 2px; MARGIN: 2px; WIDTH: 400px; COLOR: #0000ff; PADDING-TOP: 2px; TEXT-ALIGN: left"><B>TOXCCT 
                                &gt;&gt;&gt; GEII 
                                power</B></P><BR><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=804498#xx804498xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=804498#xx804498xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1034797_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1034797xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1034797#xx1034797xx" 
                                name=1034797>Good Article!!</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=976089"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle><FONT 
                                color=#3399ff><I>Thats</I><B>Alok</B>&nbsp;</FONT></FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>2:55 9 Feb 
                                '05&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1034797_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>But 
                                problem is in ME!,as i am <BIG>big ZERO</BIG> in 
                                assembly language.<BR><BR>may be after reading 
                                some of tutorial written by you, i grasp the 
                                concept of perfectly debugging the 
                                application.<BR><BR>thanks for providing the 
                                programmer community this Great article<BR><BR>
                                <HR color=#ff6600>
                                <B><I>"<FONT color=#ff6600>I Think this Will 
                                Help</FONT>"</I></B><BR><H5<BR>&nbsp;Alok Gupta 
                                <BR>&nbsp;visit me at <A 
                                href="http://alok.bizhat.com/">http://alok.bizhat.com/</A><BR>
                                <H5></H5><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=1034797#xx1034797xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1034797#xx1034797xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=1454739_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx1454739xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=1454739#xx1454739xx" 
                                name=1454739>Re: Please stop writing 
                                tutorials.</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=30251"><IMG 
                                title="Click for User Profile" height=15 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/userinfo.gif" 
                                width=14 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>Trollslayer&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>4:57 19 Apr 
                                '06&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=1454739_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=36><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>Nice 
                                article and good troll slaying <IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/smiley_wink.gif" 
                                align=absMiddle> <BR><BR><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=30251">The 
                                tigress is here</A> <IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/smiley_biggrin.gif" 
                                align=absMiddle><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=1454739#xx1454739xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=1454739#xx1454739xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle 
                                align=right></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=6 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR>
                          <TR id=797469_h0 bgColor=#fef9e7>
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD bgColor=white><A name=xx797469xx></A><IMG 
                                height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD class=messagetitle width="100%"><A 
                                class=messagetitle id=DynMessLink 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;forumid=36054&amp;select=797469#xx797469xx" 
                                name=797469>Re: Please stop writing 
                                tutorials.</A></TD>
                                <TD vAlign=bottom noWrap><A 
                                href="http://www.codeproject.com/script/profile/whos_who.asp?id=175"><IMG 
                                title="CodeProject supporter - Click for Profile" 
                                height=16 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/support_icon.gif" 
                                width=16 border=0></A>&nbsp;</TD>
                                <TD noWrap width=140><FONT 
                                class=messagetitle>peterchen&nbsp;</FONT></TD>
                                <TD style="WIDTH: 9em" noWrap align=right 
                                width=120><FONT class=messagetitle>14:22 20 Apr 
                                '04&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
                          <TR id=797469_h1 style="DISPLAY: none">
                            <TD width="100%">
                              <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                              border=0>
                                <TBODY>
                                <TR>
                                <TD><IMG height=1 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/ind.gif" 
                                width=18><IMG 
                                src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_blank.gif" 
                                align=absMiddle>&nbsp;</TD>
                                <TD width="100%" bgColor=#d5eaff>
                                <TABLE cellSpacing=5 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD>
                                <TABLE cellSpacing=0 cellPadding=0 width="100%" 
                                border=0>
                                <TBODY>
                                <TR>
                                <TD colSpan=2><FONT class=messagecontent>I'm 
                                quite surprised that you had just 5 '1' votes by 
                                this time.<BR><BR>If you would be willing to 
                                discuss the issues in a court and professional 
                                manner, you had would have a great chance to 
                                make a point, or two or three.<BR><BR>But your 
                                reply looks very much like that of a very 
                                arrogant guy who thinks he's better. <BR><BR>
                                <HR color=maroon>
                                <SMALL><I>Flirt harder, I'm a 
                                Coder</I><BR><BR><A 
                                href="http://www.cherea.de/movielog/" 
                                target=_blank>mlog</A> || <A 
                                href="http://www.codeproject.com/gen/design/agileprogramming.asp">Agile 
                                Programming</A> | <A 
                                href="http://www.codeproject.com/tips/doxysetup.asp">doxygen</A></SMALL><BR>&nbsp;</FONT></TD></TR>
                                <TR vAlign=top>
                                <TD class=messagetitle>[<A 
                                href="http://www.codeproject.com/script/profile/logon.asp?ct=%2Fdebug%2Fcdbntsd2%2Easp">Sign 
                                in</A> | <A 
                                title="View only messages within this thread" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?df=100&amp;tid=776907&amp;forumid=36054&amp;select=797469#xx797469xx">View 
                                Thread</A> | <A 
                                title="Get the URL for this message" 
                                href="http://www.codeproject.com/debug/cdbntsd2.asp?msg=797469#xx797469xx">Get 
                                Link</A>]</TD>
                                <TD class=messagetitle align=right>Score: 1.5 (2 
                                votes). 
                                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR>
                          <TR>
                            <TD><IMG height=5 
                              src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/t.gif" 
                              width=1 border=0></TD></TR></TBODY></TABLE></TD></TR>
                    <TR bgColor=#fbedbb>
                      <TD>
                        <TABLE cellPadding=2 width="100%">
                          <TBODY>
                          <TR>
                            <TD class=messagetitle>Last Visit: 12:46 Friday 
                              24th November, 2006</TD>
                            <TD noWrap align=right><FONT 
                              class=messagetitle><SPAN 
                              class=HoverLink>First</SPAN> <SPAN 
                              class=HoverLink>Prev</SPAN> <SPAN 
                              class=HoverLink>Next</SPAN> <SPAN 
                              class=HoverLink>&nbsp;&nbsp;&nbsp;&nbsp;</SPAN> 
                              </FONT></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></DIV>
            <P class=smallText><IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_general.gif" 
            align=absMiddle> General comment &nbsp;&nbsp; <IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_info.gif" 
            align=absMiddle> News / Info &nbsp;&nbsp; <IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_question.gif" 
            align=absMiddle> Question &nbsp;&nbsp; <IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_answer.gif" 
            align=absMiddle> Answer &nbsp;&nbsp; <IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_game.gif" 
            align=absMiddle> Joke / Game &nbsp;&nbsp; <IMG 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/news_sticky.gif" 
            align=absMiddle> Admin message</P><BR>
            <TABLE cellSpacing=5 width="100%">
              <TBODY>
              <TR vAlign=top>
                <TD class=smallText>Updated: 29 Mar 2004 </TD>
                <TD class=SmallText align=right>Article content copyright Toby 
                  Opferman, 2004<BR>everything else Copyright © <A 
                  href="mailto:webmaster@codeproject.com">CodeProject</A>, 
                  1999-2006</A>. <BR>Web10 | <A 
                  href="http://www.codeproject.com/info/MediaKit">Advertise on 
                  The Code Project</A> | <A 
                  href="http://www.codeproject.com/info/privacy.asp">Privacy</A> 
                </TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
      <SCRIPT 
      src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/front.asp" 
      type=text/javascript></SCRIPT>
      <BR>
      <CENTER>
      <TABLE cellSpacing=0 cellPadding=0 width="95%" border=0>
        <TBODY>
        <TR>
          <TD bgColor=#ff9900 height=1><IMG height=1 
            src="Debug Tutorial Part 2 The Stack - The Code Project - Debug tips_fichiers/space.gif"></TD></TR>
        <TR>
          <TD align=middle><FONT size=1><A 
            href="http://www.theultimatetoolbox.com/">The Ultimate Toolbox</A>  
            <A href="http://www.aspalliance.com/">ASP Alliance</A>  <A 
            href="http://www.developerfusion.co.uk/">Developer Fusion</A>  <A 
            href="http://www.developersdex.com/">Developersdex</A>  <A 
            href="http://www.devguru.com/">DevGuru</A>  <A 
            href="http://www.programmersheaven.com/">Programmers Heaven</A>  <A 
            href="http://www.planet-source-code.com/">Planet Source Code</A>  
            <A href="http://www.tek-tips.com/">Tek-Tips Forums</A>  
        </FONT></TD></TR></TBODY></TABLE></CENTER></TR></TBODY></TABLE></BODY></HTML>
